<!DOCTYPE html>
<html lang="ru" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í—Å–µ–ª–µ–Ω–Ω–∞—è —á–∏—Å–ª–∞ –ü–∏ (œÄ)</title>

    <!-- Open Graph -->
    <meta property="og:title" content="8 —Å–ø–æ—Å–æ–±–æ–≤ –ø–æ–Ω—è—Ç—å —á–∏—Å–ª–æ œÄ ‚Äî –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏">
    <meta property="og:description" content="–û—Ç –∫–∞—Ç—è—â–µ–≥–æ—Å—è –∫–æ–ª–µ—Å–∞ –¥–æ —Å—Ç–∞–ª–∫–∏–≤–∞—é—â–∏—Ö—Å—è –±–ª–æ–∫–æ–≤: 8 –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–∏—Ö –∫—Ä–∞—Å–æ—Ç—É —á–∏—Å–ª–∞ –ü–∏.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://zven73.github.io/pi_explanation/">
    <meta property="og:image" content="https://zven73.github.io/pi_explanation/og-preview.png">
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="8 Ways to Understand Pi ‚Äî Interactive Visualizations">
    <meta name="twitter:description" content="Rolling wheels, Archimedes polygons, Monte Carlo darts and more ‚Äî explore Pi through 8 interactive simulations.">
    <meta name="twitter:image" content="https://zven73.github.io/pi_explanation/og-preview.png">

    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#06b6d4">

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: { extend: {} }
        }
    </script>
    <style>
        html { scroll-behavior: smooth; }
        canvas {
            image-rendering: auto;
            user-select: none;
            -webkit-user-select: none;
            touch-action: manipulation;
        }
        .math-font { font-family: 'Cambria Math', 'Times New Roman', serif; }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #64748b; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }

        details > summary { list-style: none; cursor: pointer; }
        details > summary::-webkit-details-marker { display: none; }
        details[open] summary ~ * { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }

        .tooltip { position: relative; cursor: help; border-bottom: 1px dotted currentColor; }

        /* Nav bar */
        #topnav { position: sticky; top: 0; z-index: 50; }
        #topnav .nav-links { overflow-x: auto; scrollbar-width: none; -ms-overflow-style: none; }
        #topnav .nav-links::-webkit-scrollbar { display: none; }
        #topnav a.active { border-color: currentColor; opacity: 1; }

        /* Pi progress bar */
        #pi-progress { position: fixed; bottom: 16px; right: 16px; z-index: 40; }
        @media (max-width: 640px) {
            #pi-progress { bottom: 8px; right: 8px; font-size: 0.75rem; }
        }

        /* Mobile canvas containers */
        @media (max-width: 640px) {
            .canvas-wrap { height: auto !important; min-height: 180px; }
        }
    </style>
</head>
<body class="bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-100 min-h-screen font-sans transition-colors duration-300 selection:bg-cyan-500/30">

    <!-- STICKY NAV -->
    <nav id="topnav" class="bg-white/90 dark:bg-slate-900/90 backdrop-blur border-b border-slate-200 dark:border-slate-700 transition-colors">
        <div class="container mx-auto max-w-7xl px-4 flex items-center gap-2 py-2">
            <span class="font-bold text-cyan-600 dark:text-cyan-400 text-lg shrink-0 mr-2">œÄ</span>
            <div class="nav-links flex gap-1 flex-1 min-w-0">
                <a href="#sim-wheel" class="shrink-0 px-2 py-1 text-xs rounded border border-transparent text-slate-500 dark:text-slate-400 hover:text-cyan-600 dark:hover:text-cyan-400 transition-colors" data-i18n="nav_wheel">–ö–æ–ª–µ—Å–æ</a>
                <a href="#sim-archimedes" class="shrink-0 px-2 py-1 text-xs rounded border border-transparent text-slate-500 dark:text-slate-400 hover:text-amber-600 dark:hover:text-amber-400 transition-colors" data-i18n="nav_archimedes">–ê—Ä—Ö–∏–º–µ–¥</a>
                <a href="#sim-montecarlo" class="shrink-0 px-2 py-1 text-xs rounded border border-transparent text-slate-500 dark:text-slate-400 hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors" data-i18n="nav_montecarlo">–ú–æ–Ω—Ç–µ-–ö–∞—Ä–ª–æ</a>
                <a href="#sim-buffon" class="shrink-0 px-2 py-1 text-xs rounded border border-transparent text-slate-500 dark:text-slate-400 hover:text-purple-600 dark:hover:text-purple-400 transition-colors" data-i18n="nav_buffon">–ë—é—Ñ—Ñ–æ–Ω</a>
                <a href="#sim-pizza" class="shrink-0 px-2 py-1 text-xs rounded border border-transparent text-slate-500 dark:text-slate-400 hover:text-pink-600 dark:hover:text-pink-400 transition-colors" data-i18n="nav_pizza">–ü–∏—Ü—Ü–∞</a>
                <a href="#sim-onion" class="shrink-0 px-2 py-1 text-xs rounded border border-transparent text-slate-500 dark:text-slate-400 hover:text-teal-600 dark:hover:text-teal-400 transition-colors" data-i18n="nav_onion">–õ—É–∫–æ–≤–∏—Ü–∞</a>
                <a href="#sim-blocks" class="shrink-0 px-2 py-1 text-xs rounded border border-transparent text-slate-500 dark:text-slate-400 hover:text-orange-600 dark:hover:text-orange-400 transition-colors" data-i18n="nav_blocks">–ë–ª–æ–∫–∏</a>
                <a href="#sim-series" class="shrink-0 px-2 py-1 text-xs rounded border border-transparent text-slate-500 dark:text-slate-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors" data-i18n="nav_series">–†—è–¥—ã</a>
                <a href="#sim-quiz" class="shrink-0 px-2 py-1 text-xs rounded border border-transparent text-slate-500 dark:text-slate-400 hover:text-rose-600 dark:hover:text-rose-400 transition-colors" data-i18n="nav_quiz">–ö–≤–∏–∑</a>
            </div>
            <div class="flex gap-2 shrink-0">
                <button id="btnLang" class="px-3 py-1.5 bg-slate-200 dark:bg-slate-800 border border-slate-300 dark:border-slate-700 rounded-lg text-sm font-medium hover:bg-slate-300 dark:hover:bg-slate-700 transition-colors shadow-sm">RU/EN</button>
                <button id="btnSound" class="px-3 py-1.5 bg-slate-200 dark:bg-slate-800 border border-slate-300 dark:border-slate-700 rounded-lg text-sm font-medium hover:bg-slate-300 dark:hover:bg-slate-700 transition-colors shadow-sm" data-i18n="btn_sound_off">üîá</button>
                <button id="btnTheme" class="px-3 py-1.5 bg-slate-200 dark:bg-slate-800 border border-slate-300 dark:border-slate-700 rounded-lg text-sm font-medium hover:bg-slate-300 dark:hover:bg-slate-700 transition-colors shadow-sm">‚òÄÔ∏è</button>
            </div>
        </div>
    </nav>

    <div class="container mx-auto px-4 py-8 max-w-7xl">

        <header class="text-center mb-16 pb-4 scroll-mt-16">
            <h1 class="text-4xl md:text-6xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-cyan-500 via-emerald-500 to-indigo-500 dark:from-cyan-400 dark:via-emerald-400 dark:to-indigo-400 mb-4 pb-2" data-i18n="main_title">
                8 —Å–ø–æ—Å–æ–±–æ–≤ –ø–æ–Ω—è—Ç—å —á–∏—Å–ª–æ œÄ
            </h1>
            <p class="text-lg text-slate-600 dark:text-slate-400 max-w-3xl mx-auto leading-relaxed" data-i18n="main_subtitle">
                –û—Ç —Ñ–∏–∑–∏–∫–∏ —Å—Ç–∞–ª–∫–∏–≤–∞—é—â–∏—Ö—Å—è –±–ª–æ–∫–æ–≤ –¥–æ —Ä—É—á–Ω–æ–≥–æ –±—Ä–æ—Å–∞–Ω–∏—è –¥—Ä–æ—Ç–∏–∫–æ–≤. –ò–¥–µ–∞–ª—å–Ω–æ –ø–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –∏ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.
            </p>
        </header>

        <div class="grid grid-cols-1 xl:grid-cols-2 gap-8">

            <!-- ==========================================
                 1. –ö–ê–¢–Ø–©–ï–ï–°–Ø –ö–û–õ–ï–°–û
                 ========================================== -->
            <div id="sim-wheel" class="bg-white dark:bg-slate-800/50 rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col shadow-xl transition-colors scroll-mt-16">
                <div class="p-6 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800">
                    <h2 class="text-2xl font-bold text-cyan-600 dark:text-cyan-400" data-i18n="wheel_title">1. –†–∞–∑–≤–µ—Ä—Ç–∫–∞ –∫–æ–ª–µ—Å–∞</h2>
                </div>
                <div class="p-6 flex-grow flex flex-col">
                    <div class="canvas-wrap bg-slate-900 rounded-xl relative border border-slate-700/50 mb-4 h-[250px] flex justify-center items-center overflow-hidden shadow-inner">
                        <canvas id="rollingCanvas" width="600" height="250" class="max-w-full max-h-full"></canvas>
                    </div>
                    <div class="flex justify-between items-center mb-6">
                        <div class="text-slate-600 dark:text-slate-300"><span data-i18n="wheel_rotation">–û–±–æ—Ä–æ—Ç</span>: <span id="rotationCount" class="font-mono text-cyan-600 dark:text-cyan-400 font-bold">0.00</span></div>
                        <button id="restartRolling" class="px-5 py-2 bg-cyan-100 dark:bg-cyan-600/20 hover:bg-cyan-200 dark:hover:bg-cyan-600/40 text-cyan-700 dark:text-cyan-400 border border-cyan-300 dark:border-cyan-500/30 rounded-lg transition-colors font-medium" data-i18n="wheel_restart">–ó–∞–Ω–æ–≤–æ</button>
                    </div>
                    <details class="group mt-auto bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-200 dark:border-slate-700/50">
                        <summary class="flex justify-between p-4 font-medium text-slate-700 dark:text-slate-300 group-hover:text-cyan-600 dark:group-hover:text-cyan-300 transition-colors">
                            <span data-i18n="wheel_how">–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?</span><span>‚ñº</span>
                        </summary>
                        <div class="p-4 pt-0 text-slate-600 dark:text-slate-400 text-sm border-t border-slate-200 dark:border-slate-700/50 mt-2">
                            <p data-i18n-html="wheel_desc">–î–ª–∏–Ω–∞ –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏ <span class="math-font font-bold">C = œÄ √ó d</span>. –ï—Å–ª–∏ –¥–∏–∞–º–µ—Ç—Ä –∫–æ–ª–µ—Å–∞ —Ä–∞–≤–µ–Ω 1 –µ–¥–∏–Ω–∏—Ü–µ, —Ç–æ –∑–∞ –æ–¥–∏–Ω –ø–æ–ª–Ω—ã–π –æ–±–æ—Ä–æ—Ç –æ–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç –Ω–∞ –∑–µ–º–ª–µ —Å–ª–µ–¥ –¥–ª–∏–Ω–æ–π —Ä–æ–≤–Ω–æ <span class="tooltip" title="3.14159265...">œÄ –µ–¥–∏–Ω–∏—Ü</span>.</p>
                        </div>
                    </details>
                </div>
            </div>

            <!-- ==========================================
                 2. –ú–ù–û–ì–û–£–ì–û–õ–¨–ù–ò–ö–ò –ê–†–•–ò–ú–ï–î–ê
                 ========================================== -->
            <div id="sim-archimedes" class="bg-white dark:bg-slate-800/50 rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col shadow-xl transition-colors scroll-mt-16">
                <div class="p-6 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800">
                    <h2 class="text-2xl font-bold text-amber-500 dark:text-amber-400" data-i18n="arch_title">2. –ú–µ—Ç–æ–¥ –ê—Ä—Ö–∏–º–µ–¥–∞</h2>
                </div>
                <div class="p-6 flex-grow flex flex-col">
                    <div class="canvas-wrap bg-slate-900 rounded-xl relative border border-slate-700/50 mb-4 h-[250px] flex justify-center items-center overflow-hidden shadow-inner">
                        <canvas id="archimedesCanvas" width="250" height="250" class="max-w-full max-h-full"></canvas>
                    </div>
                    <div class="mb-4 text-sm text-slate-600 dark:text-slate-400">
                        <div class="flex justify-between items-center mb-2">
                            <span data-i18n="arch_min_sides">3 –≥—Ä–∞–Ω–∏</span>
                            <div class="flex items-center gap-2">
                                <span class="font-bold" data-i18n="arch_sides">–ì—Ä–∞–Ω–µ–π:</span>
                                <input type="number" id="polyInput" min="3" max="500" value="3" class="w-16 px-2 py-1 bg-slate-100 dark:bg-slate-900 border border-amber-300 dark:border-slate-600 rounded text-center text-amber-600 dark:text-amber-400 font-bold focus:outline-none focus:border-amber-500">
                            </div>
                            <span>500</span>
                        </div>
                        <input type="range" id="polySlider" min="3" max="500" value="3" class="w-full accent-amber-500 h-2 bg-slate-200 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer">
                    </div>
                    <div class="grid grid-cols-2 gap-4 text-sm bg-slate-50 dark:bg-slate-900/50 p-3 rounded-xl border border-slate-200 dark:border-slate-700/50 mb-6">
                        <div><span data-i18n="arch_inscribed">–í–ø–∏—Å–∞–Ω–Ω—ã–π</span>: <span id="piMin" class="font-mono text-red-500 dark:text-red-400 font-bold block">0.00000</span></div>
                        <div><span data-i18n="arch_circumscribed">–û–ø–∏—Å–∞–Ω–Ω—ã–π</span>: <span id="piMax" class="font-mono text-blue-500 dark:text-blue-400 font-bold block">0.00000</span></div>
                    </div>
                    <details class="group mt-auto bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-200 dark:border-slate-700/50">
                        <summary class="flex justify-between p-4 font-medium text-slate-700 dark:text-slate-300 group-hover:text-amber-600 dark:group-hover:text-amber-300 transition-colors">
                            <span data-i18n="arch_try96">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ 96 –≥—Ä–∞–Ω–µ–π!</span><span>‚ñº</span>
                        </summary>
                        <div class="p-4 pt-0 text-slate-600 dark:text-slate-400 text-sm border-t border-slate-200 dark:border-slate-700/50 mt-2">
                            <p data-i18n="arch_desc">–ê—Ä—Ö–∏–º–µ–¥ ¬´–∑–∞–∂–∞–ª¬ª –ü–∏ –º–µ–∂–¥—É –¥–≤—É–º—è –º–Ω–æ–≥–æ—É–≥–æ–ª—å–Ω–∏–∫–∞–º–∏. –û–Ω –≤—Ä—É—á–Ω—É—é (–±–µ–∑ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–æ–≤!) –¥–æ—Å—á–∏—Ç–∞–ª –¥–æ 96 –≥—Ä–∞–Ω–µ–π. –í–≤–µ–¥–∏—Ç–µ 96 –≤ –ø–æ–ª–µ –≤—ã—à–µ, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.</p>
                        </div>
                    </details>
                </div>
            </div>

            <!-- ==========================================
                 3. –ú–û–ù–¢–ï-–ö–ê–†–õ–û
                 ========================================== -->
            <div id="sim-montecarlo" class="bg-white dark:bg-slate-800/50 rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col shadow-xl transition-colors scroll-mt-16">
                <div class="p-6 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 flex justify-between items-center">
                    <h2 class="text-2xl font-bold text-emerald-600 dark:text-emerald-400" data-i18n="mc_title">3. –ú–æ–Ω—Ç–µ-–ö–∞—Ä–ª–æ</h2>
                    <span class="text-xs bg-emerald-100 dark:bg-emerald-900/50 text-emerald-700 dark:text-emerald-300 px-2 py-1 rounded border border-emerald-200 dark:border-emerald-700/50 animate-pulse" data-i18n="mc_click">–ö–ª–∏–∫–∞–π –ø–æ –º–∏—à–µ–Ω–∏!</span>
                </div>
                <div class="p-6 flex-grow flex flex-col">
                    <div class="canvas-wrap bg-slate-900 rounded-xl relative border border-slate-700/50 mb-4 h-[250px] flex justify-center items-center overflow-hidden shadow-inner cursor-crosshair">
                        <canvas id="monteCarloCanvas" width="250" height="250" class="max-w-full max-h-full"></canvas>
                    </div>
                    <div class="grid grid-cols-2 gap-4 text-sm bg-slate-50 dark:bg-slate-900/50 p-3 rounded-xl border border-slate-200 dark:border-slate-700/50 mb-4">
                        <div><span data-i18n="mc_throws">–ë—Ä–æ—Å–∫–æ–≤</span>: <span id="totalPoints" class="font-mono text-slate-700 dark:text-slate-300 font-bold">0</span></div>
                        <div><span data-i18n="mc_inside">–í –∫—Ä—É–≥–µ</span>: <span id="insidePoints" class="font-mono text-emerald-600 dark:text-emerald-400 font-bold">0</span></div>
                        <div class="col-span-2 text-center text-lg mt-1 border-t border-slate-200 dark:border-slate-700/50 pt-2 text-slate-700 dark:text-slate-300">
                            œÄ ‚âà <span id="piEstimate" class="font-bold font-mono text-emerald-600 dark:text-emerald-400">0.00000</span>
                        </div>
                    </div>
                    <div class="flex gap-2 mb-6">
                        <button id="fastForwardMC" class="flex-1 px-4 py-2 bg-emerald-100 dark:bg-emerald-600/20 hover:bg-emerald-200 dark:hover:bg-emerald-600/40 text-emerald-700 dark:text-emerald-400 border border-emerald-300 dark:border-emerald-500/30 rounded-lg transition-colors font-medium" data-i18n="mc_auto">–ê–≤—Ç–æ–±—Ä–æ—Å–æ–∫</button>
                        <button id="resetMC" class="px-4 py-2 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 rounded-lg transition-colors font-medium text-slate-700 dark:text-slate-200" data-i18n="mc_reset">–°–±—Ä–æ—Å</button>
                    </div>
                    <details class="group mt-auto bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-200 dark:border-slate-700/50">
                        <summary class="flex justify-between p-4 font-medium text-slate-700 dark:text-slate-300 group-hover:text-emerald-600 dark:group-hover:text-emerald-300 transition-colors">
                            <span data-i18n="mc_how">–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?</span><span>‚ñº</span>
                        </summary>
                        <div class="p-4 pt-0 text-slate-600 dark:text-slate-400 text-sm border-t border-slate-200 dark:border-slate-700/50 mt-2">
                            <p data-i18n-html="mc_desc">–ü–ª–æ—â–∞–¥—å –∫—Ä—É–≥–∞ (<span class="math-font">œÄr¬≤</span>) –¥–µ–ª–µ–Ω–Ω–∞—è –Ω–∞ –ø–ª–æ—â–∞–¥—å –∫–≤–∞–¥—Ä–∞—Ç–∞ (<span class="math-font">4r¬≤</span>) —Ä–∞–≤–Ω–∞ <span class="math-font font-bold">œÄ / 4</span>. –î–æ–ª—è –¥—Ä–æ—Ç–∏–∫–æ–≤, –ø–æ–ø–∞–≤—à–∏—Ö –≤ –∫—Ä—É–≥, —Å—Ç—Ä–µ–º–∏—Ç—Å—è –∫ —ç—Ç–æ–º—É —á–∏—Å–ª—É.</p>
                        </div>
                    </details>
                </div>
            </div>

            <!-- ==========================================
                 4. –ò–ì–õ–ê –ë–Æ–§–§–û–ù–ê
                 ========================================== -->
            <div id="sim-buffon" class="bg-white dark:bg-slate-800/50 rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col shadow-xl transition-colors scroll-mt-16">
                <div class="p-6 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800">
                    <h2 class="text-2xl font-bold text-purple-600 dark:text-purple-400" data-i18n="buf_title">4. –ò–≥–ª–∞ –ë—é—Ñ—Ñ–æ–Ω–∞</h2>
                </div>
                <div class="p-6 flex-grow flex flex-col">
                    <div class="canvas-wrap bg-slate-900 rounded-xl relative border border-slate-700/50 mb-4 h-[250px] flex justify-center items-center overflow-hidden shadow-inner">
                        <canvas id="buffonCanvas" width="400" height="250" class="max-w-full max-h-full"></canvas>
                    </div>
                    <div class="grid grid-cols-2 gap-4 text-sm bg-slate-50 dark:bg-slate-900/50 p-3 rounded-xl border border-slate-200 dark:border-slate-700/50 mb-4">
                        <div><span data-i18n="buf_matches">–°–ø–∏—á–µ–∫</span>: <span id="buffonTotal" class="font-mono text-slate-700 dark:text-slate-300 font-bold">0</span></div>
                        <div><span data-i18n="buf_crosses">–ü–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π</span>: <span id="buffonCross" class="font-mono text-purple-600 dark:text-purple-400 font-bold">0</span></div>
                        <div class="col-span-2 text-center text-lg mt-1 border-t border-slate-200 dark:border-slate-700/50 pt-2 text-slate-700 dark:text-slate-300">
                            œÄ ‚âà <span id="buffonPi" class="font-bold font-mono text-purple-600 dark:text-purple-400">0.00000</span>
                        </div>
                    </div>
                    <div class="flex gap-2 mb-6">
                        <button id="fastForwardBuffon" class="flex-1 px-4 py-2 bg-purple-100 dark:bg-purple-600/20 hover:bg-purple-200 dark:hover:bg-purple-600/40 text-purple-700 dark:text-purple-400 border border-purple-300 dark:border-purple-500/30 rounded-lg transition-colors font-medium" data-i18n="buf_speed">–£—Å–∫–æ—Ä–∏—Ç—å –±—Ä–æ—Å–∫–∏</button>
                        <button id="resetBuffon" class="px-4 py-2 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 rounded-lg transition-colors font-medium text-slate-700 dark:text-slate-200" data-i18n="buf_clear">–û—á–∏—Å—Ç–∏—Ç—å –ø–æ–ª</button>
                    </div>
                    <details class="group mt-auto bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-200 dark:border-slate-700/50">
                        <summary class="flex justify-between p-4 font-medium text-slate-700 dark:text-slate-300 group-hover:text-purple-600 dark:group-hover:text-purple-300 transition-colors">
                            <span data-i18n="buf_where">–ì–¥–µ —Ç—É—Ç –ü–∏?</span><span>‚ñº</span>
                        </summary>
                        <div class="p-4 pt-0 text-slate-600 dark:text-slate-400 text-sm border-t border-slate-200 dark:border-slate-700/50 mt-2">
                            <p data-i18n-html="buf_desc">–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è —â–µ–ª–∏ —Å–ø–∏—á–∫–æ–π (–µ—Å–ª–∏ –µ—ë –¥–ª–∏–Ω–∞ —Ä–∞–≤–Ω–∞ —à–∏—Ä–∏–Ω–µ –¥–æ—Å–∫–∏) —Ä–∞–≤–Ω–∞ <span class="math-font font-bold">2 / œÄ</span>. –†–∞–∑–¥–µ–ª–∏–≤ —É–¥–≤–æ–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ –±—Ä–æ—Å–∫–æ–≤ –Ω–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è, –º—ã –ø–æ–ª—É—á–∞–µ–º –ü–∏.</p>
                        </div>
                    </details>
                </div>
            </div>

            <!-- ==========================================
                 5. –ü–ò–¶–¶–ê –ü–ò
                 ========================================== -->
            <div id="sim-pizza" class="xl:col-span-2 bg-white dark:bg-slate-800/50 rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col shadow-xl transition-colors ring-1 ring-pink-500/20 scroll-mt-16">
                <div class="p-6 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800">
                    <h2 class="text-2xl font-bold text-pink-500 dark:text-pink-400" data-i18n="pizza_title">5. –ü–∏—Ü—Ü–∞ –ü–∏ (–ü—Ä–µ–¥–µ–ª –∏ –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫)</h2>
                </div>
                <div class="p-6 flex flex-col md:flex-row gap-6 items-center">
                    <div class="w-full md:w-2/3 bg-slate-900 rounded-xl relative border border-slate-700/50 overflow-hidden flex justify-center items-center shadow-inner py-4">
                        <canvas id="pizzaCanvas" width="800" height="350" class="max-w-full h-auto max-h-[350px]"></canvas>
                    </div>
                    <div class="w-full md:w-1/3 flex flex-col gap-6">
                        <div class="text-center">
                            <p class="text-slate-600 dark:text-slate-300 mb-6 text-sm md:text-base" data-i18n="pizza_desc">–ü–æ—Ç—è–Ω–∏—Ç–µ –ø–æ–ª–∑—É–Ω–æ–∫, —á—Ç–æ–±—ã —Ä–∞–∑—Ä–µ–∑–∞—Ç—å –ø–∏—Ü—Ü—É –Ω–∞ –±–æ–ª—å—à–µ–µ —á–∏—Å–ª–æ —á–∞—Å—Ç–µ–π. –ß–µ–º –∏—Ö –±–æ–ª—å—à–µ, —Ç–µ–º –±–ª–∏–∂–µ —Ñ–∏–≥—É—Ä–∞ –∫ –∏–¥–µ–∞–ª—å–Ω–æ–º—É –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫—É!</p>
                            <div class="mb-2 flex justify-between text-sm text-slate-500 items-center">
                                <span>4</span>
                                <span class="font-bold text-pink-600 dark:text-pink-400 text-base border border-pink-200 dark:border-pink-500/30 bg-pink-50 dark:bg-pink-900/30 px-3 py-1 rounded-lg shadow-sm dark:shadow-inner">
                                    <span data-i18n="pizza_slices">–ö—É—Å–æ—á–∫–æ–≤</span>: <span id="pizzaSlicesVal" class="font-mono text-lg">8</span>
                                </span>
                                <span>100</span>
                            </div>
                            <input type="range" id="pizzaSlider" min="4" max="100" step="2" value="8" class="w-full accent-pink-500 h-3 bg-slate-200 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer mb-6">
                            <button id="pizzaBtn" class="w-full px-5 py-3 bg-pink-100 dark:bg-pink-600/20 hover:bg-pink-200 dark:hover:bg-pink-600/40 text-pink-700 dark:text-pink-400 border border-pink-300 dark:border-pink-500/30 transition-all rounded-lg font-bold text-lg mb-4" data-i18n="pizza_assemble">–°–æ–±—Ä–∞—Ç—å –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫</button>
                        </div>
                        <details class="group bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-200 dark:border-slate-700/50">
                            <summary class="flex justify-between p-4 font-medium text-slate-700 dark:text-slate-300 group-hover:text-pink-600 dark:group-hover:text-pink-300 transition-colors">
                                <span data-i18n="pizza_proof">–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ –ø–ª–æ—â–∞–¥–∏</span><span>‚ñº</span>
                            </summary>
                            <div class="p-4 pt-0 text-slate-600 dark:text-slate-400 text-sm border-t border-slate-200 dark:border-slate-700/50 mt-2" data-i18n-html="pizza_proof_desc">
                                <p class="mb-2">–î–ª–∏–Ω–∞ –≤—Å–µ—Ö –∫–æ—Ä–æ—á–µ–∫ –ø–∏—Ü—Ü—ã = <span class="math-font text-pink-600 dark:text-pink-300 font-bold">2œÄR</span>.</p>
                                <p class="mb-2">–ü—Ä–∏ <span class="math-font font-bold tooltip" title="–°—Ç—Ä–µ–º–∏—Ç—Å—è –∫ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç–∏">N ‚Üí ‚àû</span> –±–æ–∫–æ–≤—ã–µ –≥—Ä–∞–Ω–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–º–∏!</p>
                                <p class="text-slate-800 dark:text-white bg-pink-100 dark:bg-pink-900/40 p-2 rounded border border-pink-200 dark:border-pink-500/30 mt-3 font-medium">
                                    –®–∏—Ä–∏–Ω–∞ = <span class="math-font text-pink-600 dark:text-pink-300">œÄR</span>, –í—ã—Å–æ—Ç–∞ = <span class="math-font text-pink-600 dark:text-pink-300">R</span><br>
                                    <span class="math-font text-pink-600 dark:text-pink-300 font-bold text-base">S = R √ó (œÄR) = œÄR¬≤</span>
                                </p>
                            </div>
                        </details>
                    </div>
                </div>
            </div>

            <!-- ==========================================
                 6. –õ–£–ö–û–í–ò–¶–ê –ö–ï–ü–õ–ï–†–ê
                 ========================================== -->
            <div id="sim-onion" class="xl:col-span-2 bg-white dark:bg-slate-800/50 rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col shadow-xl transition-colors ring-1 ring-teal-500/20 scroll-mt-16">
                <div class="p-6 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800">
                    <h2 class="text-2xl font-bold text-teal-600 dark:text-teal-400" data-i18n="onion_title">6. –ú–µ—Ç–æ–¥ –ª—É–∫–æ–≤–∏—Ü—ã (–ò–∑ –∫—Ä—É–≥–∞ –≤ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫)</h2>
                </div>
                <div class="p-6 flex flex-col md:flex-row gap-6 items-center">
                    <div class="w-full md:w-2/3 bg-slate-900 rounded-xl relative border border-slate-700/50 overflow-hidden flex justify-center items-center shadow-inner py-4">
                        <canvas id="onionCanvas" width="800" height="350" class="max-w-full h-auto max-h-[350px]"></canvas>
                    </div>
                    <div class="w-full md:w-1/3 flex flex-col gap-6">
                        <div class="text-center">
                            <p class="text-slate-600 dark:text-slate-300 mb-4 text-sm md:text-base" data-i18n="onion_desc">–ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º –∫—Ä—É–≥ –∫–∞–∫ –º–∏—à–µ–Ω—å –∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –∫–æ–ª–µ—Ü. –†–∞–∑—Ä–µ–∂–µ–º –∏ —Ä–∞–∑–≤–µ—Ä–Ω–µ–º –∏—Ö –≤—Å–µ —Ä–∞–∑–æ–º!</p>
                            <button id="onionBtn" class="w-full px-5 py-3 bg-teal-100 dark:bg-teal-600/20 hover:bg-teal-200 dark:hover:bg-teal-600/40 text-teal-700 dark:text-teal-400 border border-teal-300 dark:border-teal-500/30 transition-all rounded-lg font-bold text-lg mb-4" data-i18n="onion_unfold">–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∫–æ–ª—å—Ü–∞!</button>
                            <input type="range" id="onionSlider" min="0" max="100" value="0" class="w-full accent-teal-500 h-3 bg-slate-200 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer">
                        </div>
                        <details class="group bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-200 dark:border-slate-700/50">
                            <summary class="flex justify-between p-4 font-medium text-slate-700 dark:text-slate-300 group-hover:text-teal-600 dark:group-hover:text-teal-300 transition-colors">
                                <span data-i18n="onion_proof">–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ –ø–ª–æ—â–∞–¥–∏ (–ò–Ω—Ç–µ–≥—Ä–∞–ª)</span><span>‚ñº</span>
                            </summary>
                            <div class="p-4 pt-0 text-slate-600 dark:text-slate-400 text-sm border-t border-slate-200 dark:border-slate-700/50 mt-2" data-i18n-html="onion_proof_desc">
                                <p class="mb-2">–í–Ω–µ—à–Ω–µ–µ –∫–æ–ª—å—Ü–æ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–∞–Ω–∏–µ (<span class="math-font text-teal-600 dark:text-teal-300">2œÄR</span>). –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∫–æ–ª—å—Ü–∞ –æ–±—Ä–∞–∑—É—é—Ç –ª–µ—Å–µ–Ω–∫—É, —Å—Ç–∞–Ω–æ–≤—è—Å—å –∏–¥–µ–∞–ª—å–Ω—ã–º —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–º.</p>
                                <p class="text-slate-800 dark:text-white bg-teal-100 dark:bg-teal-900/40 p-2 rounded border border-teal-200 dark:border-teal-500/30 mt-3 font-medium">
                                    –ü–ª–æ—â–∞–¥—å = ¬Ω √ó –û—Å–Ω–æ–≤–∞–Ω–∏–µ √ó –í—ã—Å–æ—Ç–∞<br>
                                    <span class="math-font text-teal-600 dark:text-teal-300 font-bold text-base">S = ¬Ω √ó (2œÄR) √ó R = œÄR¬≤</span>
                                </p>
                            </div>
                        </details>
                    </div>
                </div>
            </div>

            <!-- ==========================================
                 7. –°–¢–û–õ–ö–ù–û–í–ï–ù–ò–ï –ë–õ–û–ö–û–í (–ì–ê–õ–ò–õ–ï–ô –ò –ü–ò)
                 ========================================== -->
            <div id="sim-blocks" class="xl:col-span-2 bg-white dark:bg-slate-800/50 rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col shadow-xl transition-colors ring-1 ring-orange-500/20 scroll-mt-16">
                <div class="p-6 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 flex justify-between items-center">
                    <h2 class="text-2xl font-bold text-orange-500 dark:text-orange-400" data-i18n="blocks_title">7. –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ –±–ª–æ–∫–æ–≤ (–ú–∞–≥–∏—è —Ñ–∏–∑–∏–∫–∏)</h2>
                    <span id="blocksSoundHint" class="text-xs bg-orange-100 dark:bg-orange-900/50 text-orange-700 dark:text-orange-300 px-2 py-1 rounded border border-orange-200 dark:border-orange-700/50" data-i18n="blocks_sound">–í–∫–ª—é—á–∏—Ç–µ –∑–≤—É–∫!</span>
                </div>
                <div class="p-6 flex flex-col md:flex-row gap-6 items-center">
                    <div class="w-full md:w-2/3 bg-slate-900 rounded-xl relative border border-slate-700/50 overflow-hidden flex flex-col shadow-inner">
                        <canvas id="blocksCanvas" width="800" height="250" class="max-w-full h-auto"></canvas>
                        <div class="absolute top-4 right-4 bg-slate-800/90 px-4 py-2 rounded-lg border border-slate-600 shadow-lg text-center backdrop-blur-sm">
                            <div class="text-slate-400 text-xs uppercase tracking-wider mb-1" data-i18n="blocks_collisions_label">–°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è</div>
                            <div id="blocksCollisions" class="text-4xl font-mono font-bold text-orange-400 leading-none">0</div>
                        </div>
                    </div>
                    <div class="w-full md:w-1/3 flex flex-col gap-6">
                        <div class="text-center">
                            <p class="text-slate-600 dark:text-slate-300 mb-4 text-sm md:text-base" data-i18n="blocks_desc">–°–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –≤–µ–∫—Ç–æ—Ä—ã —Å–∫–æ—Ä–æ—Å—Ç–∏ (—Å—Ç—Ä–µ–ª–∫–∏)! –û–≥—Ä–æ–º–Ω—ã–π –∏–º–ø—É–ª—å—Å –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç –º–∞–ª–µ–Ω—å–∫–∏–π –∫—É–±–∏–∫ –º–µ—Ç–∞—Ç—å—Å—è –∫–∞–∫ –ø—É–ª—è.</p>
                            <div class="mb-4 text-left">
                                <label class="text-sm font-bold text-slate-500 dark:text-slate-400 block mb-2" data-i18n="blocks_mass_label">–°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –º–∞—Å—Å –∫—É–±–æ–≤:</label>
                                <select id="blocksMass" class="w-full bg-slate-100 dark:bg-slate-800 border border-slate-300 dark:border-slate-600 text-slate-800 dark:text-white rounded-lg px-3 py-2 outline-none font-mono cursor-pointer shadow-sm">
                                    <option value="0" data-i18n="blocks_mass_0">1 : 1 (–ú–∞—Å—Å—ã –∏ —Ä–∞–∑–º–µ—Ä—ã —Ä–∞–≤–Ω—ã)</option>
                                    <option value="1" data-i18n="blocks_mass_1">100 : 1 (–ë–æ–ª—å—à–æ–π —Ç—è–∂–µ–ª–µ–µ)</option>
                                    <option value="2" data-i18n="blocks_mass_2">10 000 : 1 (–ì–∏–≥–∞–Ω—Ç—Å–∫–∏–π –≤–µ—Å)</option>
                                </select>
                            </div>
                            <button id="blocksBtn" class="w-full mt-2 px-5 py-3 bg-orange-100 dark:bg-orange-600/20 hover:bg-orange-200 dark:hover:bg-orange-600/40 text-orange-700 dark:text-orange-400 border border-orange-300 dark:border-orange-500/30 transition-all rounded-lg font-bold shadow-md" data-i18n="blocks_start">–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏–º—É–ª—è—Ü–∏—é</button>
                        </div>
                        <details class="group bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-200 dark:border-slate-700/50" open>
                            <summary class="flex justify-between p-4 font-medium text-slate-700 dark:text-slate-300 group-hover:text-orange-600 dark:group-hover:text-orange-300 transition-colors">
                                <span data-i18n="blocks_paradox">–í —á–µ–º –ø–∞—Ä–∞–¥–æ–∫—Å –ü–∏?</span><span>‚ñº</span>
                            </summary>
                            <div class="p-4 pt-0 text-slate-600 dark:text-slate-400 text-sm border-t border-slate-200 dark:border-slate-700/50 mt-2">
                                <p data-i18n-html="blocks_paradox_desc">–ü–æ –∑–∞–∫–æ–Ω—É —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —ç–Ω–µ—Ä–≥–∏–∏, –µ—Å–ª–∏ –º–∞—Å—Å–∞ –±–æ–ª—å—à–æ–≥–æ –∫—É–±–∞ —Ä–∞–≤–Ω–∞ <span class="math-font font-bold">100<sup>N</sup></span> –∫–≥, —Ç–æ –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π –¥–æ —Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞, –∫–∞–∫ –æ–±–∞ –∫—É–±–∞ —É–ª–µ—Ç—è—Ç –≤–ø—Ä–∞–≤–æ (–∏ –º–∞–ª—ã–π —É–∂–µ –Ω–µ –¥–æ–≥–æ–Ω–∏—Ç –±–æ–ª—å—à–æ–≥–æ), –±—É–¥–µ—Ç —Ä–∞–≤–Ω–æ –ø–µ—Ä–≤—ã–º <span class="math-font font-bold">N+1</span> —Ü–∏—Ñ—Ä–∞–º —á–∏—Å–ª–∞ –ü–∏!</p>
                            </div>
                        </details>
                    </div>
                </div>
            </div>

            <!-- ==========================================
                 8. –ß–ò–°–õ–û–í–´–ï –†–Ø–î–´ (–ú–ê–¢–ê–ù–ê–õ–ò–ó)
                 ========================================== -->
            <div id="sim-series" class="xl:col-span-2 bg-white dark:bg-slate-800/50 rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col shadow-xl transition-colors ring-1 ring-indigo-500/20 scroll-mt-16">
                <div class="p-6 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800">
                    <h2 class="text-2xl font-bold text-indigo-500 dark:text-indigo-400" data-i18n="series_title">8. –ú–∞—Ç–∞–Ω–∞–ª–∏–∑ (–†—è–¥—ã –ù—å—é—Ç–æ–Ω–∞)</h2>
                </div>
                <div class="p-6 flex flex-col md:flex-row gap-6 items-center">
                    <div class="w-full md:w-2/3 bg-slate-900 rounded-xl relative border border-slate-700/50 overflow-hidden flex flex-col shadow-inner">
                        <canvas id="seriesCanvas" width="800" height="300" class="max-w-full h-auto max-h-[300px]"></canvas>
                        <div class="bg-slate-800/80 p-3 text-xs md:text-sm grid grid-cols-1 md:grid-cols-2 gap-4 border-t border-slate-700/50">
                            <div class="text-sky-400 font-mono">
                                <span class="text-slate-400 text-xs block mb-1" data-i18n="series_leibniz">–†—è–¥ –õ–µ–π–±–Ω–∏—Ü–∞ (–ú–µ–¥–ª–µ–Ω–Ω—ã–π)</span>
                                œÄ ‚âà 4 - 4/3 + 4/5 - 4/7 ... <br>
                                <span id="valLeibniz" class="text-lg font-bold">0.00000</span>
                            </div>
                            <div class="text-indigo-400 font-mono">
                                <span class="text-slate-400 text-xs block mb-1" data-i18n="series_nilakantha">–†—è–¥ –ù–∏–ª–∞–∫–∞–Ω—Ç—ã (–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π)</span>
                                œÄ ‚âà 3 + 4/(2¬∑3¬∑4) - 4/(4¬∑5¬∑6) ... <br>
                                <span id="valNil" class="text-lg font-bold">0.00000</span>
                            </div>
                        </div>
                    </div>
                    <div class="w-full md:w-1/3 flex flex-col gap-6">
                        <div class="text-center">
                            <p class="text-slate-600 dark:text-slate-300 mb-4 text-sm md:text-base" data-i18n="series_desc">–ì—Ä–∞—Ñ–∏–∫ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ —Ä—è–¥–∞ –¥—Ä–æ–±–µ–π –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç—Å—è –∫ —Ç–æ—á–Ω–æ–π –ª–∏–Ω–∏–∏ –ü–∏.</p>
                            <div class="text-slate-500 dark:text-slate-400 text-sm mb-2"><span data-i18n="series_steps">–®–∞–≥–æ–≤ –≤—ã—á–∏—Å–ª–µ–Ω–æ</span>: <span id="seriesTerms" class="text-slate-800 dark:text-white font-bold">0</span></div>
                            <input type="range" id="seriesSlider" min="0" max="60" value="0" class="w-full accent-indigo-500 h-3 bg-slate-200 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer mb-4">
                            <button id="seriesBtn" class="w-full px-5 py-2 bg-indigo-100 dark:bg-indigo-600/20 hover:bg-indigo-200 dark:hover:bg-indigo-600/40 text-indigo-700 dark:text-indigo-400 border border-indigo-300 dark:border-indigo-500/30 transition-all rounded-lg font-bold" data-i18n="series_auto">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç</button>
                        </div>
                        <details class="group bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-200 dark:border-slate-700/50" open>
                            <summary class="flex justify-between p-4 font-medium text-slate-700 dark:text-slate-300 group-hover:text-indigo-600 dark:group-hover:text-indigo-300 transition-colors">
                                <span data-i18n="series_math">–í—ã—Å—à–∞—è —Å—Ç—É–ø–µ–Ω—å –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏</span><span>‚ñº</span>
                            </summary>
                            <div class="p-4 pt-0 text-slate-600 dark:text-slate-400 text-sm border-t border-slate-200 dark:border-slate-700/50 mt-2" data-i18n-html="series_math_desc">
                                <p class="mb-2">–ì–µ–æ–º–µ—Ç—Ä–∏–µ–π —Å—á–∏—Ç–∞—Ç—å —Å–ª–æ–∂–Ω–æ. –ò—Å–∞–∞–∫ –ù—å—é—Ç–æ–Ω –ø–æ–Ω—è–ª, —á—Ç–æ –ü–∏ –º–æ–∂–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –±–µ—Å–∫–æ–Ω–µ—á–Ω—É—é —Å—É–º–º—É –ø—Ä–æ—Å—Ç—ã—Ö –¥—Ä–æ–±–µ–π.</p>
                                <p class="mb-3 text-indigo-500 dark:text-indigo-400 font-medium">–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç: –ù—å—é—Ç–æ–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–ª —ç—Ç–æ—Ç –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω—ã–π –º–µ—Ç–æ–¥ –≤ 1665 –≥–æ–¥—É, —Å–∏–¥—è –¥–æ–º–∞ –Ω–∞ —Å—Ç—Ä–æ–≥–æ–π —Å–∞–º–æ–∏–∑–æ–ª—è—Ü–∏–∏ –∏–∑-–∑–∞ —ç–ø–∏–¥–µ–º–∏–∏ –í–µ–ª–∏–∫–æ–π –ª–æ–Ω–¥–æ–Ω—Å–∫–æ–π —á—É–º—ã ‚Äî —Å–æ–≤—Å–µ–º –∫–∞–∫ –≤–µ—Å—å –º–∏—Ä –≤ 2020-2022 –≥–æ–¥–∞—Ö!</p>
                                <p><strong>–ì–æ–ª—É–±–æ–π –≥—Ä–∞—Ñ–∏–∫</strong> ‚Äî –ø—Ä—ã–≥–∞–µ—Ç –≤–æ–∫—Ä—É–≥ –ü–∏ –æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω–æ.</p>
                                <p><strong>–§–∏–æ–ª–µ—Ç–æ–≤—ã–π –≥—Ä–∞—Ñ–∏–∫</strong> ‚Äî —Å—Ö–æ–¥–∏—Ç—Å—è –∫ –ª–∏–Ω–∏–∏ –ü–∏ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ, –∏–ª–ª—é—Å—Ç—Ä–∏—Ä—É—è –≥–µ–Ω–∏–∞–ª—å–Ω–æ—Å—Ç—å "—É—Å–∫–æ—Ä–µ–Ω–Ω—ã—Ö" —Ä–∞—Å—á–µ—Ç–æ–≤!</p>
                            </div>
                        </details>
                    </div>
                </div>
            </div>

            <!-- ==========================================
                 9. –ö–í–ò–ó
                 ========================================== -->
            <div id="sim-quiz" class="xl:col-span-2 bg-white dark:bg-slate-800/50 rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col shadow-xl transition-colors ring-1 ring-rose-500/20 scroll-mt-16">
                <div class="p-6 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800">
                    <h2 class="text-2xl font-bold text-rose-500 dark:text-rose-400" data-i18n="quiz_title">–ü—Ä–æ–≤–µ—Ä—å —Å–µ–±—è!</h2>
                </div>
                <div class="p-6">
                    <p class="text-slate-600 dark:text-slate-400 mb-6" data-i18n="quiz_intro">–í –ø—É–ª–µ 40 –ø—Ä–æ—Å—Ç—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤. –ö–∞–∂–¥—ã–π —Ä–∞–∑ –≤—ã–ø–∞–¥—É—Ç —Å–ª—É—á–∞–π–Ω—ã–µ 5.</p>
                    <div id="quizContainer"></div>
                    <div id="quizResult" class="hidden text-center mt-6 p-6 bg-slate-50 dark:bg-slate-900/50 rounded-xl border border-slate-200 dark:border-slate-700/50">
                        <div id="quizScore" class="text-4xl font-bold mb-2"></div>
                        <p id="quizComment" class="text-lg text-slate-600 dark:text-slate-400"></p>
                        <div id="quizAnswers" class="mt-5 text-left"></div>
                    </div>
                    <button id="quizSubmit" class="mt-4 w-full px-5 py-3 bg-rose-100 dark:bg-rose-600/20 hover:bg-rose-200 dark:hover:bg-rose-600/40 text-rose-700 dark:text-rose-400 border border-rose-300 dark:border-rose-500/30 transition-all rounded-lg font-bold text-lg" data-i18n="quiz_check">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç—ã</button>
                </div>
            </div>

        </div>
    </div>

    <!-- Pi Progress Bar -->
    <div id="pi-progress" class="bg-white/90 dark:bg-slate-800/90 backdrop-blur rounded-xl border border-slate-200 dark:border-slate-700 shadow-lg px-4 py-3 transition-all">
        <div class="text-xs text-slate-500 dark:text-slate-400 mb-1" data-i18n="progress_label">–ö–æ–ª–ª–µ–∫—Ç–∏–≤–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å œÄ</div>
        <div class="font-mono text-lg font-bold text-cyan-600 dark:text-cyan-400" id="piProgressValue">3._____</div>
        <div class="w-32 h-1.5 bg-slate-200 dark:bg-slate-700 rounded-full mt-1 overflow-hidden">
            <div id="piProgressBar" class="h-full bg-gradient-to-r from-cyan-500 to-emerald-500 rounded-full transition-all duration-500" style="width:0%"></div>
        </div>
    </div>

    <script>
        // ==========================================
        // i18n TRANSLATIONS
        // ==========================================
        let currentLang = localStorage.getItem('piLang') || 'ru';

        const T = {
            ru: {
                main_title: '8 —Å–ø–æ—Å–æ–±–æ–≤ –ø–æ–Ω—è—Ç—å —á–∏—Å–ª–æ œÄ',
                main_subtitle: '–û—Ç —Ñ–∏–∑–∏–∫–∏ —Å—Ç–∞–ª–∫–∏–≤–∞—é—â–∏—Ö—Å—è –±–ª–æ–∫–æ–≤ –¥–æ —Ä—É—á–Ω–æ–≥–æ –±—Ä–æ—Å–∞–Ω–∏—è –¥—Ä–æ—Ç–∏–∫–æ–≤. –ò–¥–µ–∞–ª—å–Ω–æ –ø–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –∏ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.',
                nav_wheel: '–ö–æ–ª–µ—Å–æ', nav_archimedes: '–ê—Ä—Ö–∏–º–µ–¥', nav_montecarlo: '–ú–æ–Ω—Ç–µ-–ö–∞—Ä–ª–æ', nav_buffon: '–ë—é—Ñ—Ñ–æ–Ω',
                nav_pizza: '–ü–∏—Ü—Ü–∞', nav_onion: '–õ—É–∫–æ–≤–∏—Ü–∞', nav_blocks: '–ë–ª–æ–∫–∏', nav_series: '–†—è–¥—ã', nav_quiz: '–ö–≤–∏–∑',
                btn_sound_off: 'üîá', btn_sound_on: 'üîä',
                wheel_title: '1. –†–∞–∑–≤–µ—Ä—Ç–∫–∞ –∫–æ–ª–µ—Å–∞', wheel_rotation: '–û–±–æ—Ä–æ—Ç', wheel_restart: '–ó–∞–Ω–æ–≤–æ',
                wheel_how: '–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?',
                wheel_desc: '–î–ª–∏–Ω–∞ –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏ <span class="math-font font-bold">C = œÄ √ó d</span>. –ï—Å–ª–∏ –¥–∏–∞–º–µ—Ç—Ä –∫–æ–ª–µ—Å–∞ —Ä–∞–≤–µ–Ω 1 –µ–¥–∏–Ω–∏—Ü–µ, —Ç–æ –∑–∞ –æ–¥–∏–Ω –ø–æ–ª–Ω—ã–π –æ–±–æ—Ä–æ—Ç –æ–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç –Ω–∞ –∑–µ–º–ª–µ —Å–ª–µ–¥ –¥–ª–∏–Ω–æ–π —Ä–æ–≤–Ω–æ <span class="tooltip" title="3.14159265...">œÄ –µ–¥–∏–Ω–∏—Ü</span>.',
                arch_title: '2. –ú–µ—Ç–æ–¥ –ê—Ä—Ö–∏–º–µ–¥–∞', arch_min_sides: '3 –≥—Ä–∞–Ω–∏', arch_sides: '–ì—Ä–∞–Ω–µ–π:',
                arch_inscribed: '–í–ø–∏—Å–∞–Ω–Ω—ã–π', arch_circumscribed: '–û–ø–∏—Å–∞–Ω–Ω—ã–π',
                arch_try96: '–ü–æ–ø—Ä–æ–±—É–π—Ç–µ 96 –≥—Ä–∞–Ω–µ–π!',
                arch_desc: '–ê—Ä—Ö–∏–º–µ–¥ ¬´–∑–∞–∂–∞–ª¬ª –ü–∏ –º–µ–∂–¥—É –¥–≤—É–º—è –º–Ω–æ–≥–æ—É–≥–æ–ª—å–Ω–∏–∫–∞–º–∏. –û–Ω –≤—Ä—É—á–Ω—É—é (–±–µ–∑ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–æ–≤!) –¥–æ—Å—á–∏—Ç–∞–ª –¥–æ 96 –≥—Ä–∞–Ω–µ–π. –í–≤–µ–¥–∏—Ç–µ 96 –≤ –ø–æ–ª–µ –≤—ã—à–µ, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.',
                mc_title: '3. –ú–æ–Ω—Ç–µ-–ö–∞—Ä–ª–æ', mc_click: '–ö–ª–∏–∫–∞–π –ø–æ –º–∏—à–µ–Ω–∏!',
                mc_throws: '–ë—Ä–æ—Å–∫–æ–≤', mc_inside: '–í –∫—Ä—É–≥–µ', mc_auto: '–ê–≤—Ç–æ–±—Ä–æ—Å–æ–∫', mc_reset: '–°–±—Ä–æ—Å',
                mc_how: '–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?',
                mc_desc: '–ü–ª–æ—â–∞–¥—å –∫—Ä—É–≥–∞ (<span class="math-font">œÄr¬≤</span>) –¥–µ–ª–µ–Ω–Ω–∞—è –Ω–∞ –ø–ª–æ—â–∞–¥—å –∫–≤–∞–¥—Ä–∞—Ç–∞ (<span class="math-font">4r¬≤</span>) —Ä–∞–≤–Ω–∞ <span class="math-font font-bold">œÄ / 4</span>. –î–æ–ª—è –¥—Ä–æ—Ç–∏–∫–æ–≤, –ø–æ–ø–∞–≤—à–∏—Ö –≤ –∫—Ä—É–≥, —Å—Ç—Ä–µ–º–∏—Ç—Å—è –∫ —ç—Ç–æ–º—É —á–∏—Å–ª—É.',
                buf_title: '4. –ò–≥–ª–∞ –ë—é—Ñ—Ñ–æ–Ω–∞', buf_matches: '–°–ø–∏—á–µ–∫', buf_crosses: '–ü–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π',
                buf_speed: '–£—Å–∫–æ—Ä–∏—Ç—å –±—Ä–æ—Å–∫–∏', buf_clear: '–û—á–∏—Å—Ç–∏—Ç—å –ø–æ–ª', buf_where: '–ì–¥–µ —Ç—É—Ç –ü–∏?',
                buf_desc: '–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è —â–µ–ª–∏ —Å–ø–∏—á–∫–æ–π (–µ—Å–ª–∏ –µ—ë –¥–ª–∏–Ω–∞ —Ä–∞–≤–Ω–∞ —à–∏—Ä–∏–Ω–µ –¥–æ—Å–∫–∏) —Ä–∞–≤–Ω–∞ <span class="math-font font-bold">2 / œÄ</span>. –†–∞–∑–¥–µ–ª–∏–≤ —É–¥–≤–æ–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ –±—Ä–æ—Å–∫–æ–≤ –Ω–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è, –º—ã –ø–æ–ª—É—á–∞–µ–º –ü–∏.',
                pizza_title: '5. –ü–∏—Ü—Ü–∞ –ü–∏ (–ü—Ä–µ–¥–µ–ª –∏ –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫)',
                pizza_desc: '–ü–æ—Ç—è–Ω–∏—Ç–µ –ø–æ–ª–∑—É–Ω–æ–∫, —á—Ç–æ–±—ã —Ä–∞–∑—Ä–µ–∑–∞—Ç—å –ø–∏—Ü—Ü—É –Ω–∞ –±–æ–ª—å—à–µ–µ —á–∏—Å–ª–æ —á–∞—Å—Ç–µ–π. –ß–µ–º –∏—Ö –±–æ–ª—å—à–µ, —Ç–µ–º –±–ª–∏–∂–µ —Ñ–∏–≥—É—Ä–∞ –∫ –∏–¥–µ–∞–ª—å–Ω–æ–º—É –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫—É!',
                pizza_slices: '–ö—É—Å–æ—á–∫–æ–≤', pizza_assemble: '–°–æ–±—Ä–∞—Ç—å –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫', pizza_back: '–í–µ—Ä–Ω—É—Ç—å –≤ —Ñ–æ—Ä–º—É –∫—Ä—É–≥–∞', pizza_animating: '–ê–Ω–∏–º–∞—Ü–∏—è...',
                pizza_proof: '–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ –ø–ª–æ—â–∞–¥–∏',
                pizza_proof_desc: '<p class="mb-2">–î–ª–∏–Ω–∞ –≤—Å–µ—Ö –∫–æ—Ä–æ—á–µ–∫ –ø–∏—Ü—Ü—ã = <span class="math-font text-pink-600 dark:text-pink-300 font-bold">2œÄR</span>.</p><p class="mb-2">–ü—Ä–∏ <span class="math-font font-bold tooltip" title="‚Üí‚àû">N ‚Üí ‚àû</span> –±–æ–∫–æ–≤—ã–µ –≥—Ä–∞–Ω–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–º–∏!</p><p class="text-slate-800 dark:text-white bg-pink-100 dark:bg-pink-900/40 p-2 rounded border border-pink-200 dark:border-pink-500/30 mt-3 font-medium">–®–∏—Ä–∏–Ω–∞ = <span class="math-font text-pink-600 dark:text-pink-300">œÄR</span>, –í—ã—Å–æ—Ç–∞ = <span class="math-font text-pink-600 dark:text-pink-300">R</span><br><span class="math-font text-pink-600 dark:text-pink-300 font-bold text-base">S = R √ó (œÄR) = œÄR¬≤</span></p>',
                onion_title: '6. –ú–µ—Ç–æ–¥ –ª—É–∫–æ–≤–∏—Ü—ã (–ò–∑ –∫—Ä—É–≥–∞ –≤ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫)',
                onion_desc: '–ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º –∫—Ä—É–≥ –∫–∞–∫ –º–∏—à–µ–Ω—å –∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –∫–æ–ª–µ—Ü. –†–∞–∑—Ä–µ–∂–µ–º –∏ —Ä–∞–∑–≤–µ—Ä–Ω–µ–º –∏—Ö –≤—Å–µ —Ä–∞–∑–æ–º!',
                onion_unfold: '–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∫–æ–ª—å—Ü–∞!', onion_fold: '–°–≤–µ—Ä–Ω—É—Ç—å –æ–±—Ä–∞—Ç–Ω–æ', onion_animating: '–ê–Ω–∏–º–∞—Ü–∏—è...',
                onion_proof: '–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ –ø–ª–æ—â–∞–¥–∏ (–ò–Ω—Ç–µ–≥—Ä–∞–ª)',
                onion_proof_desc: '<p class="mb-2">–í–Ω–µ—à–Ω–µ–µ –∫–æ–ª—å—Ü–æ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–∞–Ω–∏–µ (<span class="math-font text-teal-600 dark:text-teal-300">2œÄR</span>). –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∫–æ–ª—å—Ü–∞ –æ–±—Ä–∞–∑—É—é—Ç –ª–µ—Å–µ–Ω–∫—É, —Å—Ç–∞–Ω–æ–≤—è—Å—å –∏–¥–µ–∞–ª—å–Ω—ã–º —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–º.</p><p class="text-slate-800 dark:text-white bg-teal-100 dark:bg-teal-900/40 p-2 rounded border border-teal-200 dark:border-teal-500/30 mt-3 font-medium">–ü–ª–æ—â–∞–¥—å = ¬Ω √ó –û—Å–Ω–æ–≤–∞–Ω–∏–µ √ó –í—ã—Å–æ—Ç–∞<br><span class="math-font text-teal-600 dark:text-teal-300 font-bold text-base">S = ¬Ω √ó (2œÄR) √ó R = œÄR¬≤</span></p>',
                blocks_title: '7. –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ –±–ª–æ–∫–æ–≤ (–ú–∞–≥–∏—è —Ñ–∏–∑–∏–∫–∏)', blocks_sound: '–í–∫–ª—é—á–∏—Ç–µ –∑–≤—É–∫!',
                blocks_collisions_label: '–°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è',
                blocks_desc: '–°–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –≤–µ–∫—Ç–æ—Ä—ã —Å–∫–æ—Ä–æ—Å—Ç–∏ (—Å—Ç—Ä–µ–ª–∫–∏)! –û–≥—Ä–æ–º–Ω—ã–π –∏–º–ø—É–ª—å—Å –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç –º–∞–ª–µ–Ω—å–∫–∏–π –∫—É–±–∏–∫ –º–µ—Ç–∞—Ç—å—Å—è –∫–∞–∫ –ø—É–ª—è.',
                blocks_mass_label: '–°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –º–∞—Å—Å –∫—É–±–æ–≤:',
                blocks_mass_0: '1 : 1 (–ú–∞—Å—Å—ã –∏ —Ä–∞–∑–º–µ—Ä—ã —Ä–∞–≤–Ω—ã)', blocks_mass_1: '100 : 1 (–ë–æ–ª—å—à–æ–π —Ç—è–∂–µ–ª–µ–µ)', blocks_mass_2: '10 000 : 1 (–ì–∏–≥–∞–Ω—Ç—Å–∫–∏–π –≤–µ—Å)',
                blocks_start: '–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏–º—É–ª—è—Ü–∏—é', blocks_reset: '–°–±—Ä–æ—Å', blocks_running: '–í –ø—Ä–æ—Ü–µ—Å—Å–µ...',
                blocks_done: '‚úì –í—Å–µ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω—ã',
                blocks_paradox: '–í —á–µ–º –ø–∞—Ä–∞–¥–æ–∫—Å –ü–∏?',
                blocks_paradox_desc: '–ü–æ –∑–∞–∫–æ–Ω—É —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —ç–Ω–µ—Ä–≥–∏–∏, –µ—Å–ª–∏ –º–∞—Å—Å–∞ –±–æ–ª—å—à–æ–≥–æ –∫—É–±–∞ —Ä–∞–≤–Ω–∞ <span class="math-font font-bold">100<sup>N</sup></span> –∫–≥, —Ç–æ –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π –¥–æ —Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞, –∫–∞–∫ –æ–±–∞ –∫—É–±–∞ —É–ª–µ—Ç—è—Ç –≤–ø—Ä–∞–≤–æ (–∏ –º–∞–ª—ã–π —É–∂–µ –Ω–µ –¥–æ–≥–æ–Ω–∏—Ç –±–æ–ª—å—à–æ–≥–æ), –±—É–¥–µ—Ç —Ä–∞–≤–Ω–æ –ø–µ—Ä–≤—ã–º <span class="math-font font-bold">N+1</span> —Ü–∏—Ñ—Ä–∞–º —á–∏—Å–ª–∞ –ü–∏!',
                series_title: '8. –ú–∞—Ç–∞–Ω–∞–ª–∏–∑ (–†—è–¥—ã –ù—å—é—Ç–æ–Ω–∞)',
                series_leibniz: '–†—è–¥ –õ–µ–π–±–Ω–∏—Ü–∞ (–ú–µ–¥–ª–µ–Ω–Ω—ã–π)', series_nilakantha: '–†—è–¥ –ù–∏–ª–∞–∫–∞–Ω—Ç—ã (–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π)',
                series_desc: '–ì—Ä–∞—Ñ–∏–∫ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ —Ä—è–¥–∞ –¥—Ä–æ–±–µ–π –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç—Å—è –∫ —Ç–æ—á–Ω–æ–π –ª–∏–Ω–∏–∏ –ü–∏.',
                series_steps: '–®–∞–≥–æ–≤ –≤—ã—á–∏—Å–ª–µ–Ω–æ', series_auto: '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç', series_computing: '–í—ã—á–∏—Å–ª—è–µ–º...', series_reset: '–°–±—Ä–æ—Å',
                series_math: '–í—ã—Å—à–∞—è —Å—Ç—É–ø–µ–Ω—å –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏',
                series_math_desc: '<p class="mb-2">–ì–µ–æ–º–µ—Ç—Ä–∏–µ–π —Å—á–∏—Ç–∞—Ç—å —Å–ª–æ–∂–Ω–æ. –ò—Å–∞–∞–∫ –ù—å—é—Ç–æ–Ω –ø–æ–Ω—è–ª, —á—Ç–æ –ü–∏ –º–æ–∂–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –±–µ—Å–∫–æ–Ω–µ—á–Ω—É—é —Å—É–º–º—É –ø—Ä–æ—Å—Ç—ã—Ö –¥—Ä–æ–±–µ–π.</p><p class="mb-3 text-indigo-500 dark:text-indigo-400 font-medium">–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç: –ù—å—é—Ç–æ–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–ª —ç—Ç–æ—Ç –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω—ã–π –º–µ—Ç–æ–¥ –≤ 1665 –≥–æ–¥—É, —Å–∏–¥—è –¥–æ–º–∞ –Ω–∞ —Å—Ç—Ä–æ–≥–æ–π —Å–∞–º–æ–∏–∑–æ–ª—è—Ü–∏–∏ –∏–∑-–∑–∞ —ç–ø–∏–¥–µ–º–∏–∏ –í–µ–ª–∏–∫–æ–π –ª–æ–Ω–¥–æ–Ω—Å–∫–æ–π —á—É–º—ã ‚Äî —Å–æ–≤—Å–µ–º –∫–∞–∫ –≤–µ—Å—å –º–∏—Ä –≤ 2020-2022 –≥–æ–¥–∞—Ö!</p><p><strong>–ì–æ–ª—É–±–æ–π –≥—Ä–∞—Ñ–∏–∫</strong> ‚Äî –ø—Ä—ã–≥–∞–µ—Ç –≤–æ–∫—Ä—É–≥ –ü–∏ –æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω–æ.</p><p><strong>–§–∏–æ–ª–µ—Ç–æ–≤—ã–π –≥—Ä–∞—Ñ–∏–∫</strong> ‚Äî —Å—Ö–æ–¥–∏—Ç—Å—è –∫ –ª–∏–Ω–∏–∏ –ü–∏ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ, –∏–ª–ª—é—Å—Ç—Ä–∏—Ä—É—è –≥–µ–Ω–∏–∞–ª—å–Ω–æ—Å—Ç—å "—É—Å–∫–æ—Ä–µ–Ω–Ω—ã—Ö" —Ä–∞—Å—á–µ—Ç–æ–≤!</p>',
                quiz_title: '–ü—Ä–æ–≤–µ—Ä—å —Å–µ–±—è!',
                quiz_intro: '–í –ø—É–ª–µ 40 –ø—Ä–æ—Å—Ç—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤. –ö–∞–∂–¥—ã–π —Ä–∞–∑ –≤—ã–ø–∞–¥—É—Ç —Å–ª—É—á–∞–π–Ω—ã–µ 5.',
                quiz_check: '–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç—ã', quiz_retry: '–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞',
                quiz_answers_title: '–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã',
                quiz_correct_label: '–ü—Ä–∞–≤–∏–ª—å–Ω–æ',
                quiz_q: [
                    { q: '–ß—Ç–æ —Ç–∞–∫–æ–µ œÄ?', a: ['–û—Ç–Ω–æ—à–µ–Ω–∏–µ –¥–ª–∏–Ω—ã –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏ –∫ –¥–∏–∞–º–µ—Ç—Ä—É', '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–≥–ª–æ–≤ –≤ –∫—Ä—É–≥–µ', '–†–∞–¥–∏—É—Å –∫—Ä—É–≥–∞', '–ü–ª–æ—â–∞–¥—å –∫–≤–∞–¥—Ä–∞—Ç–∞'], c: 0 },
                    { q: '–ü—Ä–∏–±–ª–∏–∂–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ œÄ?', a: ['3.14', '2.71', '1.41', '1.62'], c: 0 },
                    { q: 'œÄ –±–æ–ª—å—à–µ 3?', a: ['–î–∞', '–ù–µ—Ç', '–¢–æ–ª—å–∫–æ –Ω–æ—á—å—é', '–ó–∞–≤–∏—Å–∏—Ç –æ—Ç –∫—Ä—É–≥–∞'], c: 0 },
                    { q: 'œÄ –º–µ–Ω—å—à–µ 4?', a: ['–î–∞', '–ù–µ—Ç', '–¢–æ–ª—å–∫–æ –ª–µ—Ç–æ–º', '–¢–æ–ª—å–∫–æ –¥–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö –∫—Ä—É–≥–æ–≤'], c: 0 },
                    { q: '–§–æ—Ä–º—É–ª–∞ –¥–ª–∏–Ω—ã –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏?', a: ['C = œÄd', 'C = d¬≤', 'C = r¬≤', 'C = 2d¬≤'], c: 0 },
                    { q: '–§–æ—Ä–º—É–ª–∞ –ø–ª–æ—â–∞–¥–∏ –∫—Ä—É–≥–∞?', a: ['S = œÄr¬≤', 'S = 2œÄr', 'S = r + d', 'S = d¬≤'], c: 0 },
                    { q: '–î–∏–∞–º–µ—Ç—Ä —ç—Ç–æ...', a: ['–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ —á–µ—Ä–µ–∑ —Ü–µ–Ω—Ç—Ä –æ—Ç –∫—Ä–∞—è –¥–æ –∫—Ä–∞—è', '–ü–æ–ª–æ–≤–∏–Ω–∞ —Ä–∞–¥–∏—É—Å–∞', '–î–ª–∏–Ω–∞ –¥—É–≥–∏', '–õ—é–±–∞—è —Ö–æ—Ä–¥–∞'], c: 0 },
                    { q: '–†–∞–¥–∏—É—Å —ç—Ç–æ...', a: ['–ü–æ–ª–æ–≤–∏–Ω–∞ –¥–∏–∞–º–µ—Ç—Ä–∞', '–î–≤–∞ –¥–∏–∞–º–µ—Ç—Ä–∞', '–ü–µ—Ä–∏–º–µ—Ç—Ä –∫—Ä—É–≥–∞', '–î–∏–∞–≥–æ–Ω–∞–ª—å –∫–≤–∞–¥—Ä–∞—Ç–∞'], c: 0 },
                    { q: '–ï—Å–ª–∏ d = 1, –¥–ª–∏–Ω–∞ –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏ —Ä–∞–≤–Ω–∞...', a: ['œÄ', '2œÄ', '1', '0.5'], c: 0 },
                    { q: '–ï—Å–ª–∏ r = 1, –ø–ª–æ—â–∞–¥—å –∫—Ä—É–≥–∞ —Ä–∞–≤–Ω–∞...', a: ['œÄ', '2œÄ', '1', '4œÄ'], c: 0 },
                    { q: '–ö–∞–∫–æ–π –º–µ—Ç–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–µ —Ç–æ—á–∫–∏?', a: ['–ú–æ–Ω—Ç–µ-–ö–∞—Ä–ª–æ', '–ê—Ä—Ö–∏–º–µ–¥', '–ë—é—Ñ—Ñ–æ–Ω', '–†—è–¥—ã –ù—å—é—Ç–æ–Ω–∞'], c: 0 },
                    { q: '–ö—Ç–æ –ø—Ä–∏–±–ª–∏–∂–∞–ª œÄ –º–Ω–æ–≥–æ—É–≥–æ–ª—å–Ω–∏–∫–∞–º–∏?', a: ['–ê—Ä—Ö–∏–º–µ–¥', '–ù—å—é—Ç–æ–Ω', '–≠–π–ª–µ—Ä', '–ì–∞—É—Å—Å'], c: 0 },
                    { q: '–í –æ–ø—ã—Ç–µ –ë—é—Ñ—Ñ–æ–Ω–∞ —Å—á–∏—Ç–∞—é—Ç...', a: ['–ü–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –∏–≥–ª—ã —Å –ª–∏–Ω–∏—è–º–∏', '–ü–ª–æ—â–∞–¥—å –∫–≤–∞–¥—Ä–∞—Ç–∞', '–°–∫–æ—Ä–æ—Å—Ç—å —Å–≤–µ—Ç–∞', '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–≥–ª–æ–≤'], c: 0 },
                    { q: '–°–∏–º–≤–æ–ª —Ä–∞–¥–∏—É—Å–∞ –æ–±—ã—á–Ω–æ...', a: ['r', 'd', 's', 'm'], c: 0 },
                    { q: '–°–∏–º–≤–æ–ª –¥–∏–∞–º–µ—Ç—Ä–∞ –æ–±—ã—á–Ω–æ...', a: ['d', 'r', 'v', 'k'], c: 0 },
                    { q: '180¬∞ –≤ —Ä–∞–¥–∏–∞–Ω–∞—Ö —ç—Ç–æ...', a: ['œÄ', '2œÄ', 'œÄ/2', '1'], c: 0 },
                    { q: '360¬∞ –≤ —Ä–∞–¥–∏–∞–Ω–∞—Ö —ç—Ç–æ...', a: ['2œÄ', 'œÄ', 'œÄ/2', '4œÄ'], c: 0 },
                    { q: 'œÄ –æ–¥–∏–Ω–∞–∫–æ–≤–æ –¥–ª—è –≤—Å–µ—Ö –∫—Ä—É–≥–æ–≤?', a: ['–î–∞', '–ù–µ—Ç', '–¢–æ–ª—å–∫–æ –¥–ª—è –±–æ–ª—å—à–∏—Ö', '–¢–æ–ª—å–∫–æ –¥–ª—è –º–∞–ª—ã—Ö'], c: 0 },
                    { q: '–£ –∫—Ä—É–≥–∞ –µ—Å—Ç—å —É–≥–ª—ã?', a: ['–ù–µ—Ç', '–î–∞, —á–µ—Ç—ã—Ä–µ', '–î–∞, –¥–≤–∞', '–ò–Ω–æ–≥–¥–∞'], c: 0 },
                    { q: '–ú–æ–∂–Ω–æ –∑–∞–ø–∏—Å–∞—Ç—å –≤—Å–µ —Ü–∏—Ñ—Ä—ã œÄ –¥–æ –∫–æ–Ω—Ü–∞?', a: ['–ù–µ—Ç', '–î–∞', '–¢–æ–ª—å–∫–æ –¥–æ 100', '–¢–æ–ª—å–∫–æ –Ω–∞ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–µ'], c: 0 },
                    { q: 'œÄ —ç—Ç–æ —á–∏—Å–ª–æ...', a: ['–ò—Ä—Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ', '–¶–µ–ª–æ–µ', '–û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ', '–ù–∞—Ç—É—Ä–∞–ª—å–Ω–æ–µ'], c: 0 },
                    { q: '–ï—Å–ª–∏ –¥–∏–∞–º–µ—Ç—Ä —É–≤–µ–ª–∏—á–∏—Ç—å –≤ 2 —Ä–∞–∑–∞, –¥–ª–∏–Ω–∞ –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏...', a: ['–£–≤–µ–ª–∏—á–∏—Ç—Å—è –≤ 2 —Ä–∞–∑–∞', '–£–≤–µ–ª–∏—á–∏—Ç—Å—è –≤ 4 —Ä–∞–∑–∞', '–ù–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è', '–£–º–µ–Ω—å—à–∏—Ç—Å—è'], c: 0 },
                    { q: '–ï—Å–ª–∏ —Ä–∞–¥–∏—É—Å —É–≤–µ–ª–∏—á–∏—Ç—å –≤ 2 —Ä–∞–∑–∞, –ø–ª–æ—â–∞–¥—å...', a: ['–£–≤–µ–ª–∏—á–∏—Ç—Å—è –≤ 4 —Ä–∞–∑–∞', '–£–≤–µ–ª–∏—á–∏—Ç—Å—è –≤ 2 —Ä–∞–∑–∞', '–ù–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è', '–£–º–µ–Ω—å—à–∏—Ç—Å—è –≤ 2 —Ä–∞–∑–∞'], c: 0 },
                    { q: '–ö–∞–∫–æ–µ —á–∏—Å–ª–æ –±–ª–∏–∂–µ –∫ œÄ?', a: ['3.14', '2.50', '4.10', '1.70'], c: 0 },
                    { q: '–î—Ä–æ–±—å 22/7 —ç—Ç–æ...', a: ['–ü—Ä–∏–±–ª–∏–∂–µ–Ω–∏–µ œÄ', '–¢–æ—á–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ œÄ', '–†–∞–¥–∏—É—Å', '–î–∏–∞–º–µ—Ç—Ä'], c: 0 },
                    { q: '–í —Ñ–æ—Ä–º—É–ª–µ C = 2œÄr –¥–≤–æ–π–∫–∞ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ...', a: ['–î–∏–∞–º–µ—Ç—Ä —Ä–∞–≤–µ–Ω –¥–≤—É–º —Ä–∞–¥–∏—É—Å–∞–º', '–†–∞–¥–∏—É—Å —Ä–∞–≤–µ–Ω –¥–≤—É–º –¥–∏–∞–º–µ—Ç—Ä–∞–º', '–ü–ª–æ—â–∞–¥—å —É–¥–≤–∞–∏–≤–∞–µ—Ç—Å—è', 'œÄ –º–µ–Ω—è–µ—Ç—Å—è'], c: 0 },
                    { q: '–ü—Ä–∏ r = 2 –ø–ª–æ—â–∞–¥—å –∫—Ä—É–≥–∞ —Ä–∞–≤–Ω–∞...', a: ['4œÄ', '2œÄ', '8œÄ', 'œÄ'], c: 0 },
                    { q: '–ü—Ä–∏ d = 10 –¥–ª–∏–Ω–∞ –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏ —Ä–∞–≤–Ω–∞...', a: ['10œÄ', '5œÄ', '20œÄ', 'œÄ'], c: 0 },
                    { q: '–ß–∏—Å–ª–æ 3.14159... —ç—Ç–æ...', a: ['œÄ', 'e', 'œÜ', '‚àö2'], c: 0 },
                    { q: '–ì–¥–µ —á–∞—â–µ –≤—Å–µ–≥–æ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è œÄ?', a: ['–í –∑–∞–¥–∞—á–∞—Ö –ø—Ä–æ –∫—Ä—É–≥ –∏ –æ–∫—Ä—É–∂–Ω–æ—Å—Ç—å', '–¢–æ–ª—å–∫–æ –≤ —Ö–∏–º–∏–∏', '–¢–æ–ª—å–∫–æ –≤ –≥–µ–æ–≥—Ä–∞—Ñ–∏–∏', '–¢–æ–ª—å–∫–æ –≤ –º—É–∑—ã–∫–µ'], c: 0 },
                    { q: '–ï—Å–ª–∏ –∫—Ä—É–≥ —Å—Ç–∞–ª –±–æ–ª—å—à–µ, œÄ...', a: ['–ù–µ –º–µ–Ω—è–µ—Ç—Å—è', '–°—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –±–æ–ª—å—à–µ', '–°—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –º–µ–Ω—å—à–µ', '–ò—Å—á–µ–∑–∞–µ—Ç'], c: 0 },
                    { q: '–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫–≤–∏–∑–∞?', a: ['–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤', '–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É', '–°–∫–æ—Ä–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞', '–í–µ—Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞'], c: 0 },
                    { q: '–í –ú–æ–Ω—Ç–µ-–ö–∞—Ä–ª–æ –±–æ–ª—å—à–µ –±—Ä–æ—Å–∫–æ–≤ –¥–∞–µ—Ç –æ—Ü–µ–Ω–∫—É œÄ...', a: ['–¢–æ—á–Ω–µ–µ', '–•—É–∂–µ', '–°–ª—É—á–∞–π–Ω–µ–µ', '–ù–∏–∫–∞–∫ –Ω–µ –≤–ª–∏—è–µ—Ç'], c: 0 },
                    { q: '–í –æ–ø—ã—Ç–µ –ë—é—Ñ—Ñ–æ–Ω–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Å–≤—è–∑–∞–Ω–∞ —Å...', a: ['–ü–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ–º –ª–∏–Ω–∏–π', '–ü–ª–æ—â–∞–¥—å—é —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞', '–¶–≤–µ—Ç–æ–º —Ñ–æ–Ω–∞', '–ì—Ä–æ–º–∫–æ—Å—Ç—å—é –∑–≤—É–∫–∞'], c: 0 },
                    { q: '–ö–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –±–ª–∏–∂–µ –∫ œÄ?', a: ['3.1416', '2.9000', '4.0000', '1.1111'], c: 0 },
                    { q: '–ü–µ—Ä–≤—ã–µ —Ü–∏—Ñ—Ä—ã œÄ —ç—Ç–æ...', a: ['3.14', '2.71', '1.41', '1.61'], c: 0 },
                    { q: '–ü–µ—Ä–≤–∞—è —Ü–∏—Ñ—Ä–∞ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π —É œÄ?', a: ['1', '4', '5', '9'], c: 0 },
                    { q: '–í—Ç–æ—Ä–∞—è —Ü–∏—Ñ—Ä–∞ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π —É œÄ?', a: ['4', '1', '2', '8'], c: 0 },
                    { q: '–¢—Ä–µ—Ç—å—è —Ü–∏—Ñ—Ä–∞ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π —É œÄ?', a: ['1', '6', '7', '0'], c: 0 },
                    { q: 'œÄ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–æ–ª—å–∫–æ –≤ —à–∫–æ–ª–µ?', a: ['–ù–µ—Ç, –∏ –≤ –Ω–∞—É–∫–µ, –∏ –≤ –∏–Ω–∂–µ–Ω–µ—Ä–∏–∏', '–î–∞, —Ç–æ–ª—å–∫–æ –≤ —à–∫–æ–ª–µ', '–¢–æ–ª—å–∫–æ –≤ —Å–ø–æ—Ä—Ç–µ', '–¢–æ–ª—å–∫–æ –≤ –∏–≥—Ä–∞—Ö'], c: 0 }
                ],
                quiz_scores: ['0/5 ‚Äî –û—Ç–ª–∏—á–Ω—ã–π —Å—Ç–∞—Ä—Ç! –¢—ã —É–∂–µ —Ç—Ä–µ–Ω–∏—Ä—É–µ—à—å –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ.', '1/5 ‚Äî –•–æ—Ä–æ—à–µ–µ –Ω–∞—á–∞–ª–æ: –ª–æ–≥–∏–∫–∞ —É–∂–µ –≤–∫–ª—é—á–∏–ª–∞—Å—å.', '2/5 ‚Äî –ö–ª–∞—Å—Å! –£ —Ç–µ–±—è —É–≤–µ—Ä–µ–Ω–Ω–∞—è –±–∞–∑–∞.', '3/5 ‚Äî –°—É–ø–µ—Ä! –¢—ã —è–≤–Ω–æ —Ö–æ—Ä–æ—à–æ —á—É–≤—Å—Ç–≤—É–µ—à—å —Ç–µ–º—É.', '4/5 ‚Äî –û—á–µ–Ω—å —Å–∏–ª—å–Ω–æ! –ü–æ—á—Ç–∏ –∏–¥–µ–∞–ª—å–Ω–æ.', '5/5 ‚Äî –ë–ª–µ—Å—Ç—è—â–µ! –¢—ã –Ω–∞—Å—Ç–æ—è—â–∏–π –º–∞—Å—Ç–µ—Ä Pi.'],
                progress_label: '–ö–æ–ª–ª–µ–∫—Ç–∏–≤–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å œÄ',
                wheel_turn: '–û–±–æ—Ä–æ—Ç',
                buf_normal: '–û–±—ã—á–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å',
                mc_pause: '–ü–∞—É–∑–∞', mc_resume: '–ü—É—Å–∫'
            },
            en: {
                main_title: '8 Ways to Understand œÄ',
                main_subtitle: 'From colliding blocks to throwing darts by hand. Silky smooth animations and real-time math.',
                nav_wheel: 'Wheel', nav_archimedes: 'Archimedes', nav_montecarlo: 'Monte Carlo', nav_buffon: 'Buffon',
                nav_pizza: 'Pizza', nav_onion: 'Onion', nav_blocks: 'Blocks', nav_series: 'Series', nav_quiz: 'Quiz',
                btn_sound_off: 'üîá', btn_sound_on: 'üîä',
                wheel_title: '1. Rolling Wheel', wheel_rotation: 'Rotation', wheel_restart: 'Restart',
                wheel_how: 'How does it work?',
                wheel_desc: 'Circumference <span class="math-font font-bold">C = œÄ √ó d</span>. If the wheel diameter is 1, one full rotation traces exactly <span class="tooltip" title="3.14159265...">œÄ units</span> on the ground.',
                arch_title: '2. Archimedes\' Method', arch_min_sides: '3 sides', arch_sides: 'Sides:',
                arch_inscribed: 'Inscribed', arch_circumscribed: 'Circumscribed',
                arch_try96: 'Try 96 sides!',
                arch_desc: 'Archimedes trapped Pi between two polygons. He manually (no calculators!) computed up to 96 sides. Enter 96 above to see his result.',
                mc_title: '3. Monte Carlo', mc_click: 'Click the target!',
                mc_throws: 'Throws', mc_inside: 'In circle', mc_auto: 'Auto-throw', mc_reset: 'Reset',
                mc_how: 'How does it work?',
                mc_desc: 'Circle area (<span class="math-font">œÄr¬≤</span>) divided by square area (<span class="math-font">4r¬≤</span>) equals <span class="math-font font-bold">œÄ / 4</span>. The fraction of darts hitting the circle approaches this ratio.',
                buf_title: '4. Buffon\'s Needle', buf_matches: 'Needles', buf_crosses: 'Crossings',
                buf_speed: 'Speed up', buf_clear: 'Clear floor', buf_where: 'Where is Pi?',
                buf_desc: 'The probability of a needle crossing a line (when its length equals the gap width) is <span class="math-font font-bold">2 / œÄ</span>. Dividing twice the throws by crossings gives Pi.',
                pizza_title: '5. Pizza Pi (Limit & Rectangle)',
                pizza_desc: 'Drag the slider to cut the pizza into more slices. The more slices, the closer the shape to a perfect rectangle!',
                pizza_slices: 'Slices', pizza_assemble: 'Assemble rectangle', pizza_back: 'Back to circle', pizza_animating: 'Animating...',
                pizza_proof: 'Area proof',
                pizza_proof_desc: '<p class="mb-2">Total crust length = <span class="math-font text-pink-600 dark:text-pink-300 font-bold">2œÄR</span>.</p><p class="mb-2">As <span class="math-font font-bold tooltip" title="‚Üí‚àû">N ‚Üí ‚àû</span> side edges become vertical!</p><p class="text-slate-800 dark:text-white bg-pink-100 dark:bg-pink-900/40 p-2 rounded border border-pink-200 dark:border-pink-500/30 mt-3 font-medium">Width = <span class="math-font text-pink-600 dark:text-pink-300">œÄR</span>, Height = <span class="math-font text-pink-600 dark:text-pink-300">R</span><br><span class="math-font text-pink-600 dark:text-pink-300 font-bold text-base">S = R √ó (œÄR) = œÄR¬≤</span></p>',
                onion_title: '6. Onion Method (Circle to Triangle)',
                onion_desc: 'Imagine a circle as a target of many rings. Let\'s cut and unroll them all at once!',
                onion_unfold: 'Unroll rings!', onion_fold: 'Roll back', onion_animating: 'Animating...',
                onion_proof: 'Area Proof (Integral)',
                onion_proof_desc: '<p class="mb-2">The outer ring unrolls into the base (<span class="math-font text-teal-600 dark:text-teal-300">2œÄR</span>). Inner rings form steps, becoming a perfect triangle.</p><p class="text-slate-800 dark:text-white bg-teal-100 dark:bg-teal-900/40 p-2 rounded border border-teal-200 dark:border-teal-500/30 mt-3 font-medium">Area = ¬Ω √ó Base √ó Height<br><span class="math-font text-teal-600 dark:text-teal-300 font-bold text-base">S = ¬Ω √ó (2œÄR) √ó R = œÄR¬≤</span></p>',
                blocks_title: '7. Block Collisions (Physics Magic)', blocks_sound: 'Turn on sound!',
                blocks_collisions_label: 'Collisions',
                blocks_desc: 'Watch the velocity vectors (arrows)! Huge momentum makes the small block bounce like a bullet.',
                blocks_mass_label: 'Mass ratio:',
                blocks_mass_0: '1 : 1 (Equal mass & size)', blocks_mass_1: '100 : 1 (Heavy block)', blocks_mass_2: '10,000 : 1 (Huge weight)',
                blocks_start: 'Start simulation', blocks_reset: 'Reset', blocks_running: 'Running...',
                blocks_done: '‚úì All collisions complete',
                blocks_paradox: 'The Pi paradox?',
                blocks_paradox_desc: 'By conservation of energy, if the big block\'s mass is <span class="math-font font-bold">100<sup>N</sup></span> kg, the total collisions before both blocks fly right equals the first <span class="math-font font-bold">N+1</span> digits of Pi!',
                series_title: '8. Calculus (Newton\'s Series)',
                series_leibniz: 'Leibniz Series (Slow)', series_nilakantha: 'Nilakantha Series (Advanced)',
                series_desc: 'The chart shows how summing an infinite series of fractions converges to the exact Pi line.',
                series_steps: 'Steps computed', series_auto: 'Auto-compute', series_computing: 'Computing...', series_reset: 'Reset',
                series_math: 'The pinnacle of mathematics',
                series_math_desc: '<p class="mb-2">Geometry-based computation is hard. Isaac Newton realized Pi can be expressed as an infinite sum of simple fractions.</p><p class="mb-3 text-indigo-500 dark:text-indigo-400 font-medium">Fun fact: Newton developed this incredible method in 1665 while isolating at home during the Great Plague of London ‚Äî just like the entire world did in 2020-2022!</p><p><strong>Blue graph</strong> ‚Äî bounces around Pi very slowly.</p><p><strong>Purple graph</strong> ‚Äî converges to the Pi line instantly, illustrating the brilliance of "accelerated" calculations!</p>',
                quiz_title: 'Test Yourself!',
                quiz_intro: 'There are 40 easy questions in the pool. You get 5 random ones each run.',
                quiz_check: 'Check answers', quiz_retry: 'Try again',
                quiz_answers_title: 'Correct answers',
                quiz_correct_label: 'Correct',
                quiz_q: [
                    { q: 'What is œÄ?', a: ['Circumference divided by diameter', 'Number of circle corners', 'The radius', 'Square area'], c: 0 },
                    { q: 'A common approximation of œÄ is...', a: ['3.14', '2.71', '1.41', '1.62'], c: 0 },
                    { q: 'Is œÄ greater than 3?', a: ['Yes', 'No', 'Only at night', 'Depends on circle size'], c: 0 },
                    { q: 'Is œÄ less than 4?', a: ['Yes', 'No', 'Only in summer', 'Only for tiny circles'], c: 0 },
                    { q: 'Circumference formula is...', a: ['C = œÄd', 'C = d¬≤', 'C = r¬≤', 'C = 2d¬≤'], c: 0 },
                    { q: 'Area formula of a circle is...', a: ['S = œÄr¬≤', 'S = 2œÄr', 'S = r + d', 'S = d¬≤'], c: 0 },
                    { q: 'Diameter is...', a: ['Distance across center from edge to edge', 'Half of radius', 'Arc length', 'Any chord'], c: 0 },
                    { q: 'Radius is...', a: ['Half of diameter', 'Two diameters', 'Circle perimeter', 'Square diagonal'], c: 0 },
                    { q: 'If d = 1, circumference equals...', a: ['œÄ', '2œÄ', '1', '0.5'], c: 0 },
                    { q: 'If r = 1, area equals...', a: ['œÄ', '2œÄ', '1', '4œÄ'], c: 0 },
                    { q: 'Which method uses random points?', a: ['Monte Carlo', 'Archimedes', 'Buffon', 'Series'], c: 0 },
                    { q: 'Who approximated œÄ with polygons?', a: ['Archimedes', 'Newton', 'Euler', 'Gauss'], c: 0 },
                    { q: 'In Buffon experiment you count...', a: ['Needle crossings of lines', 'Square area', 'Speed of light', 'Number of corners'], c: 0 },
                    { q: 'Usual symbol for radius is...', a: ['r', 'd', 's', 'm'], c: 0 },
                    { q: 'Usual symbol for diameter is...', a: ['d', 'r', 'v', 'k'], c: 0 },
                    { q: '180¬∞ in radians is...', a: ['œÄ', '2œÄ', 'œÄ/2', '1'], c: 0 },
                    { q: '360¬∞ in radians is...', a: ['2œÄ', 'œÄ', 'œÄ/2', '4œÄ'], c: 0 },
                    { q: 'Is œÄ the same for all circles?', a: ['Yes', 'No', 'Only for big circles', 'Only for small circles'], c: 0 },
                    { q: 'Does a circle have corners?', a: ['No', 'Yes, four', 'Yes, two', 'Sometimes'], c: 0 },
                    { q: 'Can we write all digits of œÄ to the end?', a: ['No', 'Yes', 'Only to 100', 'Only on calculators'], c: 0 },
                    { q: 'œÄ is...', a: ['Irrational', 'Integer', 'Negative', 'Natural'], c: 0 },
                    { q: 'If diameter doubles, circumference...', a: ['Doubles', 'Quadruples', 'Stays same', 'Shrinks'], c: 0 },
                    { q: 'If radius doubles, area...', a: ['Becomes 4 times larger', 'Becomes 2 times larger', 'Stays same', 'Becomes half'], c: 0 },
                    { q: 'Which number is closer to œÄ?', a: ['3.14', '2.50', '4.10', '1.70'], c: 0 },
                    { q: '22/7 is...', a: ['An approximation of œÄ', 'Exact œÄ', 'Radius', 'Diameter'], c: 0 },
                    { q: 'In C = 2œÄr, the 2 means...', a: ['Diameter is two radii', 'Radius is two diameters', 'Area doubles', 'œÄ changes'], c: 0 },
                    { q: 'If r = 2, area is...', a: ['4œÄ', '2œÄ', '8œÄ', 'œÄ'], c: 0 },
                    { q: 'If d = 10, circumference is...', a: ['10œÄ', '5œÄ', '20œÄ', 'œÄ'], c: 0 },
                    { q: 'The number 3.14159... is...', a: ['œÄ', 'e', 'œÜ', '‚àö2'], c: 0 },
                    { q: 'Where do we often use œÄ?', a: ['Circle and geometry problems', 'Only chemistry', 'Only geography', 'Only music'], c: 0 },
                    { q: 'If a circle gets bigger, œÄ...', a: ['Does not change', 'Gets larger', 'Gets smaller', 'Disappears'], c: 0 },
                    { q: 'Quiz result shows...', a: ['How many answers are correct', 'Temperature', 'Internet speed', 'Phone weight'], c: 0 },
                    { q: 'In Monte Carlo, more throws make œÄ estimate...', a: ['More accurate', 'Worse', 'More random', 'Unaffected'], c: 0 },
                    { q: 'In Buffon, probability is linked to...', a: ['Line crossings', 'Triangle area', 'Background color', 'Sound volume'], c: 0 },
                    { q: 'Which option is closer to œÄ?', a: ['3.1416', '2.9000', '4.0000', '1.1111'], c: 0 },
                    { q: 'First familiar digits of œÄ are...', a: ['3.14', '2.71', '1.41', '1.61'], c: 0 },
                    { q: 'First digit after decimal in œÄ is...', a: ['1', '4', '5', '9'], c: 0 },
                    { q: 'Second digit after decimal in œÄ is...', a: ['4', '1', '2', '8'], c: 0 },
                    { q: 'Third digit after decimal in œÄ is...', a: ['1', '6', '7', '0'], c: 0 },
                    { q: 'Is œÄ used only in school?', a: ['No, also in science and engineering', 'Yes, only in school', 'Only in sports', 'Only in games'], c: 0 }
                ],
                quiz_scores: ['0/5 ‚Äî Great start. You are already training your math brain.', '1/5 ‚Äî Nice beginning. Your logic is warming up.', '2/5 ‚Äî Solid work. Your base is getting stronger.', '3/5 ‚Äî Great job. You clearly feel the topic.', '4/5 ‚Äî Very strong. Almost perfect.', '5/5 ‚Äî Brilliant. You are a true Pi master.'],
                progress_label: 'Collective œÄ precision',
                wheel_turn: 'Turn',
                buf_normal: 'Normal speed',
                mc_pause: 'Pause', mc_resume: 'Play'
            }
        };

        function t(key) { return T[currentLang][key] || T.ru[key] || key; }

        function applyLang() {
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (T[currentLang][key] !== undefined) {
                    if (el.tagName === 'OPTION') el.textContent = T[currentLang][key];
                    else el.textContent = T[currentLang][key];
                }
            });
            document.querySelectorAll('[data-i18n-html]').forEach(el => {
                const key = el.getAttribute('data-i18n-html');
                if (T[currentLang][key] !== undefined) el.innerHTML = T[currentLang][key];
            });
            document.documentElement.lang = currentLang === 'ru' ? 'ru' : 'en';
            syncSoundButton();
            buildQuiz();
        }

        document.getElementById('btnLang').onclick = () => {
            currentLang = currentLang === 'ru' ? 'en' : 'ru';
            localStorage.setItem('piLang', currentLang);
            applyLang();
        };

        // ==========================================
        // –ì–õ–û–ë–ê–õ–¨–ù–´–ï –£–¢–ò–õ–ò–¢–´ (–ó–í–£–ö, –¢–ï–ú–ê, RETINA)
        // ==========================================

        const btnTheme = document.getElementById('btnTheme');
        btnTheme.onclick = () => {
            document.documentElement.classList.toggle('dark');
            const isDark = document.documentElement.classList.contains('dark');
            btnTheme.innerText = isDark ? "‚òÄÔ∏è" : "üåô";
        };

        let audioCtx = null;
        let soundEnabled = true;
        let lastClink = 0;
        const btnSound = document.getElementById('btnSound');

        function ensureAudioContext() {
            if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            if (audioCtx.state === 'suspended') audioCtx.resume();
        }

        function syncSoundButton() {
            btnSound.innerText = soundEnabled ? t('btn_sound_on') : t('btn_sound_off');
            btnSound.setAttribute('data-i18n', soundEnabled ? 'btn_sound_on' : 'btn_sound_off');
            btnSound.classList.toggle('bg-emerald-100', soundEnabled);
            btnSound.classList.toggle('dark:bg-emerald-800', soundEnabled);
            btnSound.classList.toggle('border-emerald-300', soundEnabled);
            btnSound.classList.toggle('dark:border-emerald-600', soundEnabled);
            const blocksSoundHint = document.getElementById('blocksSoundHint');
            if (blocksSoundHint) {
                blocksSoundHint.classList.toggle('hidden', soundEnabled);
                blocksSoundHint.classList.toggle('animate-bounce', !soundEnabled);
            }
        }

        window.addEventListener('pointerdown', () => { if (soundEnabled) ensureAudioContext(); }, { once: true });
        window.addEventListener('keydown', () => { if (soundEnabled) ensureAudioContext(); }, { once: true });

        btnSound.onclick = () => {
            soundEnabled = !soundEnabled;
            if (soundEnabled) ensureAudioContext();
            syncSoundButton();
        };

        function playSound(type, freq, duration, vol=0.1) {
            if (!soundEnabled || !audioCtx) return;
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = type; osc.frequency.value = freq;
            osc.connect(gain); gain.connect(audioCtx.destination);
            osc.start();
            gain.gain.setValueAtTime(vol, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + duration);
            osc.stop(audioCtx.currentTime + duration);
        }

        function makeRetina(cvs) {
            const ctx = cvs.getContext('2d');
            const dpr = window.devicePixelRatio || 1;
            const w = parseInt(cvs.getAttribute('width'));
            const h = parseInt(cvs.getAttribute('height'));
            
            cvs.style.width = w + 'px';
            cvs.style.maxWidth = '100%';
            cvs.style.height = 'auto';
            
            cvs.width = w * dpr;
            cvs.height = h * dpr;
            ctx.scale(dpr, dpr);
            return { ctx, w, h };
        }

        function round5(val) { return parseFloat(val).toFixed(5); }

        // ==========================================
        // –ö–í–ò–ó
        // ==========================================
        let quizChecked = false;
        let currentQuizQuestions = [];

        function pickRandomQuestions(pool, count) {
            const copy = [...pool];
            for (let i = copy.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [copy[i], copy[j]] = [copy[j], copy[i]];
            }
            return copy.slice(0, Math.min(count, copy.length));
        }

        function buildQuiz() {
            const quizContainer = document.getElementById('quizContainer');
            const quizResult = document.getElementById('quizResult');
            const quizAnswers = document.getElementById('quizAnswers');
            const quizSubmit = document.getElementById('quizSubmit');
            if (!quizContainer || !quizResult || !quizSubmit || !quizAnswers) return;

            const questionPool = T[currentLang].quiz_q || [];
            currentQuizQuestions = pickRandomQuestions(questionPool, 5);
            quizContainer.innerHTML = currentQuizQuestions.map((question, qIndex) => `
                <div class="mb-4 p-4 bg-slate-50 dark:bg-slate-900/40 border border-slate-200 dark:border-slate-700/50 rounded-xl transition-colors" data-quiz-index="${qIndex}">
                    <p class="font-semibold text-slate-800 dark:text-slate-100 mb-3">${qIndex + 1}. ${question.q}</p>
                    <div class="space-y-2">
                        ${question.a.map((answer, aIndex) => `
                            <label class="flex items-start gap-3 p-2 rounded-lg border border-transparent hover:border-rose-200 dark:hover:border-rose-500/30 cursor-pointer transition-colors">
                                <input type="radio" name="quiz_${qIndex}" value="${aIndex}" class="mt-1 accent-rose-500">
                                <span class="text-slate-700 dark:text-slate-300">${answer}</span>
                            </label>
                        `).join('')}
                    </div>
                </div>
            `).join('');

            quizResult.classList.add('hidden');
            quizAnswers.innerHTML = '';
            quizSubmit.textContent = t('quiz_check');
            quizChecked = false;
        }

        function checkQuiz() {
            const questions = currentQuizQuestions || [];
            if (!questions.length) return;
            let score = 0;

            questions.forEach((question, qIndex) => {
                const questionEl = document.querySelector(`[data-quiz-index="${qIndex}"]`);
                const selected = document.querySelector(`input[name="quiz_${qIndex}"]:checked`);
                const isCorrect = selected && parseInt(selected.value, 10) === question.c;

                if (questionEl) {
                    questionEl.classList.remove('border-emerald-300', 'dark:border-emerald-500/40', 'border-rose-300', 'dark:border-rose-500/40');
                    questionEl.classList.add(isCorrect ? 'border-emerald-300' : 'border-rose-300');
                    questionEl.classList.add(isCorrect ? 'dark:border-emerald-500/40' : 'dark:border-rose-500/40');
                }
                if (isCorrect) score++;
            });

            document.getElementById('quizScore').textContent = `${score}/${questions.length}`;
            document.getElementById('quizComment').textContent = T[currentLang].quiz_scores[score];
            const quizAnswers = document.getElementById('quizAnswers');
            quizAnswers.innerHTML = `
                <h3 class="font-bold text-slate-800 dark:text-slate-100 mb-3">${t('quiz_answers_title')}</h3>
                <div class="space-y-2">
                    ${questions.map((question, qIndex) => `
                        <div class="p-3 rounded-lg border border-slate-200 dark:border-slate-700/50 bg-white dark:bg-slate-800/60">
                            <p class="text-sm font-medium text-slate-700 dark:text-slate-200 mb-1">${qIndex + 1}. ${question.q}</p>
                            <p class="text-sm text-emerald-700 dark:text-emerald-400"><span class="font-semibold">${t('quiz_correct_label')}:</span> ${question.a[question.c]}</p>
                        </div>
                    `).join('')}
                </div>
            `;
            document.getElementById('quizResult').classList.remove('hidden');
            document.getElementById('quizSubmit').textContent = t('quiz_retry');
            quizChecked = true;
        }

        document.getElementById('quizSubmit').onclick = () => {
            if (quizChecked) {
                buildQuiz();
                return;
            }
            checkQuiz();
        };

        applyLang();


        // ==========================================
        // –§–ê–ë–†–ò–ö–ò –°–ò–ú–£–õ–Ø–¶–ò–ô
        // ==========================================

        // 1. –ö–û–õ–ï–°–û
        const createWheel = () => {
            const cvs = document.getElementById('rollingCanvas');
            const { ctx, w, h } = makeRetina(cvs);
            const lbl = document.getElementById('rotationCount'), btn = document.getElementById('restartRolling');
            const R = 35, D = R * 2, groundY = 180, startX = 50, maxDist = Math.PI * D;
            let t = 0, isRolling = true, trail = [], playing = false;

            function render() {
                if (!playing) return;
                ctx.clearRect(0, 0, w, h);
                ctx.beginPath(); ctx.moveTo(20, groundY); ctx.lineTo(w - 20, groundY);
                ctx.strokeStyle = '#475569'; ctx.lineWidth = 2; ctx.stroke();
                
                const marks = [{v:0, l:'0'}, {v:1, l:'1d'}, {v:2, l:'2d'}, {v:3, l:'3d'}, {v:Math.PI, l:'œÄ √ó d', c:'#22d3ee'}];
                ctx.font = '14px sans-serif'; ctx.textAlign = 'center';
                marks.forEach(m => {
                    const x = startX + m.v * D;
                    ctx.beginPath(); ctx.moveTo(x, groundY - 5); ctx.lineTo(x, groundY + 15);
                    ctx.strokeStyle = m.c || '#64748b'; ctx.lineWidth = m.c ? 2 : 1; ctx.stroke();
                    ctx.fillStyle = m.c || '#64748b'; ctx.fillText(m.l, x, groundY + 30);
                });

                const curDist = t * maxDist;
                ctx.beginPath(); ctx.moveTo(startX, groundY - 1); ctx.lineTo(startX + curDist, groundY - 1);
                ctx.strokeStyle = '#22d3ee'; ctx.lineWidth = 4; ctx.stroke();

                const cx = startX + curDist, cy = groundY - R, angle = t * Math.PI * 2;
                const px = cx + R * Math.cos(angle + Math.PI/2), py = cy + R * Math.sin(angle + Math.PI/2);
                if (isRolling) trail.push({x: px, y: py});
                
                if (trail.length > 1) {
                    ctx.beginPath(); ctx.moveTo(trail[0].x, trail[0].y);
                    for(let i=1; i<trail.length; i++) ctx.lineTo(trail[i].x, trail[i].y);
                    ctx.strokeStyle = 'rgba(248, 113, 113, 0.4)'; ctx.lineWidth = 2; ctx.stroke();
                }

                ctx.beginPath(); ctx.arc(cx, cy, R, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(34, 211, 238, 0.1)'; ctx.fill();
                ctx.lineWidth = 2; ctx.strokeStyle = '#06b6d4'; ctx.stroke();
                ctx.beginPath(); ctx.moveTo(cx, cy); ctx.lineTo(px, py);
                ctx.strokeStyle = '#f87171'; ctx.lineWidth = 2; ctx.stroke();
                ctx.beginPath(); ctx.arc(px, py, 4, 0, Math.PI * 2);
                ctx.fillStyle = '#f87171'; ctx.fill();
                
                lbl.innerText = t.toFixed(2);
                if (isRolling) { 
                    t += 0.004; 
                    if (t >= 1) { 
                        t = 1; isRolling = false; lbl.innerText = "1.00 (" + T[currentLang].wheel_turn + ")";
                        playSound('sine', 600, 0.1, 0.05);
                    } 
                }
                requestAnimationFrame(render);
            }
            btn.onclick = () => { t = 0; isRolling = true; trail = []; if(!playing){playing=true; render();} };
            return { play: () => { if(!playing) { playing=true; render(); } }, pause: () => playing = false };
        };

        // 2. –ê–†–•–ò–ú–ï–î
        const createArchimedes = () => {
            const cvs = document.getElementById('archimedesCanvas');
            const { ctx, w, h } = makeRetina(cvs);
            const slider = document.getElementById('polySlider'), numInput = document.getElementById('polyInput');
            const R = 100, CX = w / 2, CY = h / 2;
            let playing = false, autoPlayInterval, currentAutoVal = 3, isAutoPlaying = true;
            
            function drawPolygon(n, radius, color) {
                ctx.beginPath();
                for (let i = 0; i <= n; i++) {
                    const angle = (i * 2 * Math.PI) / n - Math.PI/2;
                    const x = CX + radius * Math.cos(angle), y = CY + radius * Math.sin(angle);
                    if (i === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y);
                }
                ctx.strokeStyle = color; ctx.lineWidth = 2; ctx.stroke();
            }
            function draw() {
                ctx.clearRect(0, 0, w, h);
                const n = parseInt(slider.value);
                numInput.value = n;
                ctx.beginPath(); ctx.arc(CX, CY, R, 0, Math.PI * 2); ctx.strokeStyle = '#10b981'; ctx.lineWidth = 2; ctx.stroke(); 
                document.getElementById('piMin').innerText = round5(n * Math.sin(Math.PI / n));
                document.getElementById('piMax').innerText = round5(n * Math.tan(Math.PI / n));
                drawPolygon(n, R, '#f87171'); drawPolygon(n, R / Math.cos(Math.PI / n), '#60a5fa'); 
            }
            function stopAuto() { if(isAutoPlaying){ clearInterval(autoPlayInterval); isAutoPlaying = false; } }
            
            slider.addEventListener('input', () => { stopAuto(); draw(); });
            numInput.addEventListener('input', (e) => {
                stopAuto();
                let val = parseInt(e.target.value) || 3;
                if(val > 500) val = 500; if(val < 3) val = 3;
                slider.value = val; draw();
            });

            return { 
                play: () => { 
                    if(!playing) { 
                        playing = true; draw(); 
                        if(isAutoPlaying && !autoPlayInterval) {
                            autoPlayInterval = setInterval(() => {
                                if (currentAutoVal < 12) { currentAutoVal++; slider.value = currentAutoVal; draw(); } 
                                else { stopAuto(); }
                            }, 180);
                        }
                    } 
                }, 
                pause: () => { playing = false; clearInterval(autoPlayInterval); autoPlayInterval = null; } 
            };
        };

        // 3. –ú–û–ù–¢–ï-–ö–ê–†–õ–û
        const createMonteCarlo = () => {
            const cvs = document.getElementById('monteCarloCanvas');
            const { ctx, w, h } = makeRetina(cvs);
            let total = 0, inside = 0, speed = 10, running = true, playing = false;
            const R = w / 2, CX = R;
            
            function drawBg() {
                ctx.strokeStyle = '#334155'; ctx.lineWidth = 2; ctx.strokeRect(1,1, w-2, h-2);
                ctx.beginPath(); ctx.arc(CX, CX, R-1, 0, Math.PI*2); ctx.strokeStyle = '#10b981'; ctx.lineWidth = 2; ctx.stroke();
            }
            function throwDart(px, py) {
                const x = (px - CX) / R; const y = (py - CX) / R;
                total++;
                if (x*x + y*y <= 1) { inside++; ctx.fillStyle = '#34d399'; } else { ctx.fillStyle = '#ef4444'; }
                ctx.fillRect(px, py, 2, 2);
                updateUI();
            }
            function updateUI() {
                document.getElementById('totalPoints').innerText = total;
                document.getElementById('insidePoints').innerText = inside;
                if(total>0) document.getElementById('piEstimate').innerText = round5(4 * inside / total);
                else document.getElementById('piEstimate').innerText = "0.00000";
            }
            function render() {
                if (!playing) return;
                if(running && speed > 0) {
                    for(let i=0; i<speed; i++) {
                        const px = Math.random() * w, py = Math.random() * h;
                        throwDart(px, py);
                    }
                    if (total % 1000 < speed) drawBg(); 
                }
                requestAnimationFrame(render);
            }
            
            cvs.addEventListener('click', (e) => {
                const rect = cvs.getBoundingClientRect();
                const scaleX = w / rect.width; 
                const px = (e.clientX - rect.left) * scaleX;
                const py = (e.clientY - rect.top) * scaleX;
                throwDart(px, py);
                playSound('triangle', 800, 0.02, 0.05);
            });

            document.getElementById('fastForwardMC').onclick = (e) => {
                if(speed === 10) { speed = 1000; e.target.innerText = T[currentLang].mc_pause; running = true; }
                else if (speed === 1000) { speed = 0; e.target.innerText = T[currentLang].mc_resume; running = false; }
                else { speed = 10; e.target.innerText = T[currentLang].mc_auto; running = true; }
            };
            document.getElementById('resetMC').onclick = () => { ctx.clearRect(0,0,w,h); drawBg(); total = 0; inside = 0; updateUI(); };
            
            drawBg();
            return { play: () => { if(!playing) { playing=true; render(); } }, pause: () => playing = false };
        };

        // 4. –ë–Æ–§–§–û–ù
        const createBuffon = () => {
            const cvs = document.getElementById('buffonCanvas');
            const { ctx, w, h } = makeRetina(cvs);
            let total = 0, crosses = 0, speed = 2, D = 40, L = 40, playing = false;
            
            function drawFloorGaps() {
                ctx.strokeStyle = '#020617'; ctx.lineWidth = 3;
                for(let x = 0; x <= w; x += D) { ctx.beginPath(); ctx.moveTo(x, 0); ctx.lineTo(x, h); ctx.stroke(); }
                ctx.strokeStyle = '#1e293b'; ctx.lineWidth = 1;
                for(let x = 0; x <= w; x += D) { ctx.beginPath(); ctx.moveTo(x+2, 0); ctx.lineTo(x+2, h); ctx.stroke(); }
            }
            function drawBaseFloor() { ctx.clearRect(0,0,w,h); ctx.fillStyle = '#0f172a'; ctx.fillRect(0,0,w,h); drawFloorGaps(); }
            
            function render() {
                if (!playing) return;
                let threw = false;
                for(let i=0; i<speed; i++) {
                    const cx = Math.random() * w, cy = Math.random() * h, angle = Math.random() * Math.PI;
                    const dx = (L / 2) * Math.cos(angle), dy = (L / 2) * Math.sin(angle);
                    const x1 = cx - dx, y1 = cy - dy, x2 = cx + dx, y2 = cy + dy;
                    total++;
                    const isCross = Math.floor(x1 / D) !== Math.floor(x2 / D);
                    if (isCross) crosses++;
                    ctx.beginPath(); ctx.moveTo(x1, y1); ctx.lineTo(x2, y2);
                    ctx.strokeStyle = isCross ? 'rgba(192, 132, 252, 0.75)' : 'rgba(148, 163, 184, 0.4)'; ctx.lineWidth = 2; ctx.stroke();
                    threw = true;
                }
                if(threw) {
                    drawFloorGaps();
                    document.getElementById('buffonTotal').innerText = total; document.getElementById('buffonCross').innerText = crosses;
                    if (crosses > 0) document.getElementById('buffonPi').innerText = round5((2 * total) / crosses);
                }
                requestAnimationFrame(render);
            }
            
            document.getElementById('fastForwardBuffon').onclick = (e) => { speed = speed === 2 ? 300 : 2; e.target.innerText = speed === 2 ? t('buf_speed') : t('buf_normal'); };
            document.getElementById('resetBuffon').onclick = () => { drawBaseFloor(); total = 0; crosses = 0; document.getElementById('buffonTotal').innerText = "0"; document.getElementById('buffonCross').innerText = "0"; document.getElementById('buffonPi').innerText = "0.00000"; };
            drawBaseFloor();
            return { play: () => { if(!playing) { playing=true; render(); } }, pause: () => playing = false };
        };

        // 5. –ü–ò–¶–¶–ê
        const createPizza = () => {
            const cvs = document.getElementById('pizzaCanvas');
            const { ctx, w, h } = makeRetina(cvs);
            const slider = document.getElementById('pizzaSlider'), btn = document.getElementById('pizzaBtn');
            let targetT = 0, currentT = 0, isAnimating = false, playing = false;
            let rafId = null;
            let N = parseInt(slider.value); 
            const R = 110, CX = w / 2, CY = 175;

            function scheduleRender() {
                if (rafId !== null) return;
                rafId = requestAnimationFrame(() => {
                    rafId = null;
                    render();
                });
            }
            
            function render() {
                if (!playing && !isAnimating && currentT === targetT) return;
                ctx.clearRect(0, 0, w, h);
                let t = currentT;
                N = parseInt(slider.value); 
                document.getElementById('pizzaSlicesVal').innerText = N;
                
                const sliceAngle = (Math.PI * 2) / N;
                const arcFlatLen = (Math.PI * 2 * R) / N; 
                const rectWidth = (N / 2) * arcFlatLen; 
                const startX = CX - rectWidth / 2, rectCenterY = CY; 
                
                if (t > 0) {
                    ctx.globalAlpha = Math.min(1, t * 1.5);
                    const topY = rectCenterY - R/2 - 25, rightX = startX + rectWidth + arcFlatLen + 20;
                    const topEdgeStartX = startX + arcFlatLen / 2, topEdgeEndX = startX + rectWidth + arcFlatLen / 2;
                    
                    ctx.beginPath(); ctx.moveTo(topEdgeStartX, topY); ctx.lineTo(topEdgeEndX, topY);
                    ctx.strokeStyle = '#f472b6'; ctx.lineWidth = 2; ctx.stroke(); 
                    ctx.beginPath(); ctx.moveTo(topEdgeStartX, topY-5); ctx.lineTo(topEdgeStartX, topY+5); ctx.stroke();
                    ctx.beginPath(); ctx.moveTo(topEdgeEndX, topY-5); ctx.lineTo(topEdgeEndX, topY+5); ctx.stroke();
                    if (t > 0.9) {
                        ctx.fillStyle = '#f472b6'; ctx.font = 'bold 16px sans-serif'; ctx.textAlign = 'center';
                        ctx.fillText('–®–∏—Ä–∏–Ω–∞ = œÄ √ó R', startX + rectWidth/2 + arcFlatLen/2, topY - 10);
                        
                        ctx.beginPath(); ctx.moveTo(rightX, rectCenterY - R/2); ctx.lineTo(rightX, rectCenterY + R/2);
                        ctx.strokeStyle = '#60a5fa'; ctx.stroke(); 
                        ctx.beginPath(); ctx.moveTo(rightX-5, rectCenterY - R/2); ctx.lineTo(rightX+5, rectCenterY - R/2); ctx.stroke();
                        ctx.beginPath(); ctx.moveTo(rightX-5, rectCenterY + R/2); ctx.lineTo(rightX+5, rectCenterY + R/2); ctx.stroke();
                        ctx.fillStyle = '#60a5fa'; ctx.textAlign = 'left'; ctx.fillText('–í—ã—Å–æ—Ç–∞ = R', rightX + 10, rectCenterY + 5);
                    }
                    ctx.globalAlpha = 1.0;
                }
                
                const crustThick = Math.max(1, 8 * (16 / Math.max(16, N))), cutThick = Math.max(0.2, 1.5 * (16 / Math.max(16, N)));
                for (let i = 0; i < N; i++) {
                    const isEven = i % 2 === 0, initAngle = -Math.PI/2 + i * sliceAngle, targetAngle = isEven ? Math.PI/2 : -Math.PI/2;
                    let targetTipX, targetTipY;
                    if (isEven) { targetTipX = startX + (i/2) * arcFlatLen + arcFlatLen/2; targetTipY = rectCenterY - R/2; } 
                    else { targetTipX = startX + Math.floor(i/2) * arcFlatLen + arcFlatLen; targetTipY = rectCenterY + R/2; }
                    
                    const curAngle = (1 - t) * initAngle + t * targetAngle;
                    const curTipX = (1 - t) * CX + t * targetTipX, curTipY = (1 - t) * CY + t * targetTipY;
                    const a = sliceAngle / 2;
                    const curCpX = (1 - t) * (R / Math.cos(a)) + t * R;
                    const x1 = (1 - t) * (R * Math.cos(-a)) + t * R, y1 = (1 - t) * (R * Math.sin(-a)) + t * (-arcFlatLen/2);
                    const x2 = (1 - t) * (R * Math.cos(a)) + t * R, y2 = (1 - t) * (R * Math.sin(a)) + t * (arcFlatLen/2);
                    
                    ctx.save(); ctx.translate(curTipX, curTipY); ctx.rotate(curAngle);
                    ctx.beginPath(); ctx.moveTo(0, 0); ctx.lineTo(x1, y1); ctx.quadraticCurveTo(curCpX, 0, x2, y2); ctx.closePath();
                    ctx.fillStyle = '#fde047'; ctx.fill(); ctx.strokeStyle = '#eab308'; ctx.lineWidth = cutThick; ctx.stroke(); 
                    ctx.beginPath(); ctx.moveTo(x1, y1); ctx.quadraticCurveTo(curCpX, 0, x2, y2);
                    ctx.strokeStyle = '#d97706'; ctx.lineWidth = crustThick; ctx.stroke(); 
                    ctx.restore();
                }
                
                if (isAnimating) {
                    currentT += (targetT - currentT) * 0.05;
                    if(Math.abs(currentT - targetT) > 0.05 && currentT%0.2 < 0.05) playSound('sine', 300+currentT*200, 0.02, 0.02); 
                    if (Math.abs(currentT - targetT) < 0.005) {
                        currentT = targetT; isAnimating = false;
                        btn.innerText = currentT === 1 ? "–í–µ—Ä–Ω—É—Ç—å –≤ —Ñ–æ—Ä–º—É –∫—Ä—É–≥–∞" : "–°–æ–±—Ä–∞—Ç—å –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫";
                    }
                }
                if(playing) scheduleRender();
            }
            
            slider.oninput = () => { if (!isAnimating && playing) scheduleRender(); };
            btn.onclick = () => { targetT = targetT === 1 ? 0 : 1; if (!isAnimating) { isAnimating = true; btn.innerText = "–ê–Ω–∏–º–∞—Ü–∏—è..."; if (playing) scheduleRender(); } };
            return { play: () => { if(!playing) { playing=true; scheduleRender(); } }, pause: () => playing = false };
        };

        // 6. –õ–£–ö–û–í–ò–¶–ê
        const createOnion = () => {
            const cvs = document.getElementById('onionCanvas');
            const { ctx, w, h } = makeRetina(cvs);
            const slider = document.getElementById('onionSlider'), btn = document.getElementById('onionBtn');
            let currentT = 0, targetT = 0, isAnimating = false, playing = false;
            let rafId = null;

            const N = 40, M = 60, R_max = 100, CX = 550, CY = 175; 
            const startX = 60, baseY = 290, tipY = baseY - R_max, baseWidth = 2 * Math.PI * R_max; 

            function scheduleRender() {
                if (rafId !== null) return;
                rafId = requestAnimationFrame(() => {
                    rafId = null;
                    render();
                });
            }

            function render() {
                if (!playing && !isAnimating && currentT===targetT) return;
                ctx.clearRect(0, 0, w, h);
                let t = currentT;

                for (let i = N; i >= 1; i--) {
                    const r = i * (R_max / N);
                    ctx.beginPath();
                    for (let j = 0; j <= M; j++) {
                        const theta = (j / M) * 2 * Math.PI;
                        const circleAngle = theta + Math.PI;
                        const x0 = CX + r * Math.sin(circleAngle), y0 = CY - r * Math.cos(circleAngle);
                        const x1 = startX + (theta / (2*Math.PI)) * (2 * Math.PI * r), y1 = baseY - r; 
                        const x = (1-t) * x0 + t * x1, y = (1-t) * y0 + t * y1;
                        if (j === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y);
                    }
                    const hue = 160 + (i/N) * 60; 
                    ctx.strokeStyle = `hsl(${hue}, 80%, 50%)`; ctx.lineWidth = (R_max / N) + 0.5; ctx.stroke();
                }

                if (t > 0) {
                    ctx.globalAlpha = Math.min(1, t * 1.5);
                    ctx.strokeStyle = '#f472b6'; ctx.lineWidth = 2;
                    ctx.beginPath(); ctx.moveTo(startX, baseY + 15); ctx.lineTo(startX + baseWidth*t, baseY + 15); ctx.stroke();
                    ctx.beginPath(); ctx.moveTo(startX, baseY + 5); ctx.lineTo(startX, baseY + 25); ctx.stroke();
                    ctx.beginPath(); ctx.moveTo(startX + baseWidth*t, baseY + 5); ctx.lineTo(startX + baseWidth*t, baseY + 25); ctx.stroke();
                    
                    if (t > 0.9) {
                        ctx.fillStyle = '#f472b6'; ctx.font = 'bold 16px sans-serif'; ctx.textAlign = 'center';
                        ctx.fillText('–û—Å–Ω–æ–≤–∞–Ω–∏–µ = 2œÄR', startX + baseWidth/2, baseY + 35);
                        ctx.strokeStyle = '#60a5fa';
                        ctx.beginPath(); ctx.moveTo(startX - 15, tipY); ctx.lineTo(startX - 15, baseY); ctx.stroke();
                        ctx.beginPath(); ctx.moveTo(startX - 25, tipY); ctx.lineTo(startX - 5, tipY); ctx.stroke();
                        ctx.beginPath(); ctx.moveTo(startX - 25, baseY); ctx.lineTo(startX - 5, baseY); ctx.stroke();
                        ctx.save(); ctx.translate(startX - 25, tipY + R_max/2); ctx.rotate(-Math.PI/2);
                        ctx.fillStyle = '#60a5fa'; ctx.textAlign = 'center'; ctx.fillText('–í—ã—Å–æ—Ç–∞ = R', 0, 0); ctx.restore();
                    }
                    ctx.globalAlpha = 1.0;
                }

                if (isAnimating) {
                    currentT += (targetT - currentT) * 0.05; slider.value = currentT * 100;
                    if(Math.abs(currentT - targetT) > 0.05 && currentT%0.2 < 0.05) playSound('triangle', 200+currentT*300, 0.03, 0.01); 
                    if (Math.abs(currentT - targetT) < 0.005) {
                        currentT = targetT; slider.value = currentT * 100; isAnimating = false;
                        btn.innerText = currentT === 1 ? "–°–≤–µ—Ä–Ω—É—Ç—å –æ–±—Ä–∞—Ç–Ω–æ" : "–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∫–æ–ª—å—Ü–∞!";
                    }
                }
                if(playing) scheduleRender();
            }
            slider.oninput = (e) => { currentT = parseFloat(e.target.value)/100; targetT = currentT; isAnimating = false; btn.innerText = currentT > 0.5 ? "–°–≤–µ—Ä–Ω—É—Ç—å –æ–±—Ä–∞—Ç–Ω–æ" : "–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∫–æ–ª—å—Ü–∞!"; if(playing) scheduleRender(); };
            btn.onclick = () => { targetT = targetT === 1 ? 0 : 1; if (!isAnimating) { isAnimating = true; btn.innerText = "–ê–Ω–∏–º–∞—Ü–∏—è..."; if(playing) scheduleRender(); } };
            return { play: () => { if(!playing) { playing=true; scheduleRender(); } }, pause: () => playing = false };
        };

        // ==========================================
        // 7. –ë–õ–û–ö–ò –ì–ê–õ–ò–õ–ï–Ø
        // ==========================================
        const createBlocks = () => {
            const cvs = document.getElementById('blocksCanvas');
            const { ctx, w, h } = makeRetina(cvs);
            const selectMass = document.getElementById('blocksMass');
            const btn = document.getElementById('blocksBtn');
            const uiCols = document.getElementById('blocksCollisions');
            
            let playing = false, running = false, isFinished = false;
            let m1, m2, w1, w2, wallX=20, groundY=180;
            let x1, x2, v1, v2, cols;
            let flashes = []; 
            
            function reset() {
                let N = parseInt(selectMass.value);
                m1 = 1; m2 = Math.pow(100, N);
                
                w1 = 30; 
                w2 = (N === 0) ? 30 : (N === 1 ? 60 : 100); 
                
                x1 = 150; 
                x2 = 400; 
                v1 = 0; 
                v2 = -150; 
                cols = 0;
                uiCols.innerText = cols;
                flashes = [];
                isFinished = false;
            }
            reset();

            function drawArrow(fromX, fromY, vel, color) {
                if (Math.abs(vel) < 1) return;
                let length = vel * 0.4; 
                if (length > 150) length = 150; 
                if (length < -150) length = -150;
                
                const toX = fromX + length;
                ctx.beginPath(); ctx.moveTo(fromX, fromY); ctx.lineTo(toX, fromY);
                ctx.strokeStyle = color; ctx.lineWidth = 3; ctx.stroke();
                
                ctx.beginPath();
                if (vel > 0) {
                    ctx.moveTo(toX, fromY); ctx.lineTo(toX-10, fromY-5); ctx.lineTo(toX-10, fromY+5);
                } else {
                    ctx.moveTo(toX, fromY); ctx.lineTo(toX+10, fromY-5); ctx.lineTo(toX+10, fromY+5);
                }
                ctx.fillStyle = color; ctx.fill();
            }

            function draw() {
                ctx.clearRect(0,0,w,h);
                
                if (Math.abs(v1) > 2000) {
                    ctx.fillStyle = 'rgba(56, 189, 248, 0.2)';
                    ctx.fillRect(wallX, groundY-w1, x2 - wallX, w1);
                }

                ctx.fillStyle = '#475569';
                ctx.fillRect(0, groundY, w, h-groundY); 
                ctx.fillRect(0, groundY-120, wallX, 120); 
                
                for(let i=flashes.length-1; i>=0; i--) {
                    let f = flashes[i];
                    ctx.beginPath(); ctx.arc(f.x, f.y, f.r, 0, Math.PI*2);
                    ctx.fillStyle = `rgba(253, 224, 71, ${f.a})`; 
                    ctx.fill();
                    f.r += 2; f.a -= 0.05;
                    if(f.a <= 0) flashes.splice(i, 1);
                }
                
                ctx.fillStyle = '#38bdf8'; 
                ctx.fillRect(x1, groundY-w1, w1, w1);
                ctx.fillStyle = '#fff'; ctx.font='12px sans-serif'; ctx.textAlign='center';
                ctx.fillText('1kg', x1+w1/2, groundY-w1-10);
                
                ctx.fillStyle = '#fb923c'; 
                ctx.fillRect(x2, groundY-w2, w2, w2);
                ctx.fillStyle = '#fff'; ctx.font='bold 14px sans-serif'; 
                let mLabel = m2 === 1 ? '1kg' : (m2 === 100 ? '100kg' : '10,000kg');
                ctx.fillText(mLabel, x2+w2/2, groundY-w2-10);

                if (running || cols > 0) {
                    ctx.fillStyle = '#38bdf8';
                    ctx.fillText(`v: ${Math.round(v1)}`, x1+w1/2, groundY-w1-25);
                    ctx.fillStyle = '#fb923c';
                    ctx.fillText(`v: ${Math.round(v2)}`, x2+w2/2, groundY-w2-25);
                    
                    drawArrow(x1+w1/2, groundY-w1/2, v1, '#0284c7');
                    drawArrow(x2+w2/2, groundY-w2/2, v2, '#ea580c');
                }

                if (isFinished) {
                    ctx.fillStyle = '#10b981'; ctx.font = 'bold 16px sans-serif'; ctx.textAlign = 'left';
                    ctx.fillText(T[currentLang].blocks_done, wallX + 20, 30);
                }
            }

            function playClink() {
                if(!soundEnabled || !audioCtx) return;
                let now = audioCtx.currentTime;
                if(now - lastClink < 0.04) return; 
                lastClink = now;
                playSound('square', Math.random()*200 + 400, 0.02, 0.03);
            }

            function render() {
                if (!playing) return;
                if (running) {
                    let dt = 1 / 60; 
                    let maxVel = Math.max(Math.abs(v1), Math.abs(v2));
                    let substeps = Math.ceil((maxVel * dt) / 0.5);
                    if (substeps < 1) substeps = 1;
                    
                    let sdt = dt / substeps;
                    
                    for(let i=0; i<substeps; i++) {
                        x1 += v1 * sdt;
                        x2 += v2 * sdt;
                        
                        if (x1 <= wallX) {
                            x1 = wallX; v1 = Math.abs(v1); cols++; 
                            flashes.push({x: wallX, y: groundY-w1/2, a: 1, r: 5});
                            playClink();
                        }
                        if (x1 + w1 >= x2) {
                            x1 = x2 - w1;
                            let nv1 = (v1 * (m1 - m2) + 2 * m2 * v2) / (m1 + m2);
                            let nv2 = (v2 * (m2 - m1) + 2 * m1 * v1) / (m1 + m2);
                            v1 = nv1; v2 = nv2; cols++; 
                            flashes.push({x: x2, y: groundY-w1/2, a: 1, r: 5});
                            playClink();
                        }
                    }
                    
                    uiCols.innerText = cols;
                    
                    // –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —É—Å–ª–æ–≤–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (–¥–ª—è –≤—Å–µ—Ö N, –≤–∫–ª—é—á–∞—è 1:1)
                    if (v1 >= 0 && v2 >= v1 && cols > 0) {
                        isFinished = true;
                        btn.innerText = T[currentLang].blocks_reset;
                        if (x1 > w + 50 && x2 > w + 50) {
                            running = false; 
                        }
                    }
                }
                draw();
                requestAnimationFrame(render);
            }

            selectMass.onchange = () => { reset(); draw(); btn.innerText = T[currentLang].blocks_start; running=false; };
            btn.onclick = () => {
                if (isFinished || (!running && cols > 0)) { 
                    reset(); draw(); btn.innerText = T[currentLang].blocks_start; 
                    return; 
                }
                if (!running) {
                    running = true; btn.innerText = T[currentLang].blocks_running;
                }
            }

            draw(); 
            return { play: () => { if(!playing) { playing=true; render(); } }, pause: () => playing = false };
        };

        // ==========================================
        // 8. –ß–ò–°–õ–û–í–´–ï –†–Ø–î–´ (–° –§–ê–ö–¢–û–ú –ü–†–û –ö–ê–†–ê–ù–¢–ò–ù)
        // ==========================================
        const createSeries = () => {
            const cvs = document.getElementById('seriesCanvas');
            const { ctx, w, h } = makeRetina(cvs);
            const slider = document.getElementById('seriesSlider'), btn = document.getElementById('seriesBtn');
            let autoInterval, currentTerm = 0, playing = false;
            const maxTerms = 60, histLeibniz = [0], histNil = [3]; 
            
            let curL = 0, curN = 3;
            for(let k=0; k<=maxTerms; k++) {
                curL += (4 * Math.pow(-1, k)) / (2*k + 1); histLeibniz.push(curL);
                if (k > 0) { const n = 2*k; curN += (4 * Math.pow(-1, k+1)) / (n * (n+1) * (n+2)); histNil.push(curN); }
            }

            function draw(n) {
                ctx.clearRect(0, 0, w, h);
                const padLeft = 40, padRight = 20, padTop = 20, padBottom = 30;
                const graphW = w - padLeft - padRight, graphH = h - padTop - padBottom;
                const minY = 2.6, maxY = 4.2;
                function getY(val) { return padTop + graphH - ((val - minY) / (maxY - minY)) * graphH; }
                function getX(idx) { return padLeft + (idx / maxTerms) * graphW; }

                ctx.strokeStyle = '#334155'; ctx.lineWidth = 1;
                ctx.beginPath(); ctx.moveTo(padLeft, padTop); ctx.lineTo(padLeft, padTop + graphH); ctx.stroke();
                ctx.beginPath(); ctx.moveTo(padLeft, padTop + graphH); ctx.lineTo(padLeft + graphW, padTop + graphH); ctx.stroke();
                
                const piY = getY(Math.PI);
                ctx.beginPath(); ctx.moveTo(padLeft, piY); ctx.lineTo(padLeft + graphW, piY);
                ctx.strokeStyle = '#10b981'; ctx.lineWidth = 2; ctx.setLineDash([5, 5]); ctx.stroke(); ctx.setLineDash([]);
                ctx.fillStyle = '#10b981'; ctx.font = 'bold 14px sans-serif'; ctx.textAlign = 'left';
                ctx.fillText('–¢–æ—á–Ω–æ–µ œÄ ‚âà 3.14159', padLeft + 10, piY - 10);

                ctx.beginPath();
                for(let i=0; i<=n; i++) { const px = getX(i), py = getY(histLeibniz[i+1]); if (i===0) ctx.moveTo(px, py); else ctx.lineTo(px, py); }
                ctx.strokeStyle = '#38bdf8'; ctx.lineWidth = 3; ctx.stroke();
                
                ctx.beginPath();
                for(let i=0; i<=n; i++) { const px = getX(i), py = getY(histNil[i]); if (i===0) ctx.moveTo(px, py); else ctx.lineTo(px, py); }
                ctx.strokeStyle = '#818cf8'; ctx.lineWidth = 3; ctx.stroke();

                if (n > 0) {
                    ctx.beginPath(); ctx.arc(getX(n), getY(histLeibniz[n+1]), 5, 0, Math.PI*2); ctx.fillStyle = '#38bdf8'; ctx.fill();
                    ctx.beginPath(); ctx.arc(getX(n), getY(histNil[n]), 5, 0, Math.PI*2); ctx.fillStyle = '#818cf8'; ctx.fill();
                }
                document.getElementById('seriesTerms').innerText = n; 
                document.getElementById('valLeibniz').innerText = round5(histLeibniz[n+1]); 
                document.getElementById('valNil').innerText = round5(histNil[n]);
            }

            slider.oninput = (e) => { clearInterval(autoInterval); currentTerm = parseInt(e.target.value); draw(currentTerm); btn.innerText = T[currentLang].series_auto; };
            btn.onclick = () => {
                clearInterval(autoInterval); if (currentTerm >= maxTerms) { currentTerm = 0; slider.value = 0; }
                btn.innerText = T[currentLang].series_computing;
                autoInterval = setInterval(() => {
                    if(!playing) return; 
                    if (currentTerm < maxTerms) { currentTerm++; slider.value = currentTerm; draw(currentTerm); playSound('sine', 400+currentTerm*10, 0.05, 0.05); } 
                    else { clearInterval(autoInterval); btn.innerText = T[currentLang].series_reset; }
                }, 100); 
            };
            return {
                play: () => { playing=true; draw(currentTerm); },
                pause: () => { playing=false; clearInterval(autoInterval); autoInterval = null; }
            };
        };

        // ================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ò OBSERVER ==================
        document.addEventListener("DOMContentLoaded", () => {
            const sims = {
                'sim-wheel': createWheel(),
                'sim-archimedes': createArchimedes(),
                'sim-montecarlo': createMonteCarlo(),
                'sim-buffon': createBuffon(),
                'sim-pizza': createPizza(),
                'sim-onion': createOnion(),
                'sim-blocks': createBlocks(),
                'sim-series': createSeries()
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    const sim = sims[entry.target.id];
                    if (sim) {
                        if (entry.isIntersecting) {
                            sim.play();
                        } else {
                            sim.pause();
                        }
                    }
                });
            }, { threshold: 0.15 });

            Object.keys(sims).forEach(id => {
                const el = document.getElementById(id);
                if(el) observer.observe(el);
            });
        });
    </script>
</body>
</html>
